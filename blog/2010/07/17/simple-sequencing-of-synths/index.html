
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Simple Sequencing of Synths - RumbleSan Heavy Noise Industries</title>
  <meta name="author" content="guy">

  
  <meta name="description" content="So I’ve spent a bit of the last couple of days reading “A Practical Guide to Patterns” by **H. James Harkins **which is part of the SuperCollider &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://rumblesan.com/blog/2010/07/17/simple-sequencing-of-synths/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="RumbleSan Heavy Noise Industries" type="application/atom+xml">
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
    });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-19842221-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">RumbleSan Heavy Noise Industries</a></h1>
  
    <h2>Noise with weight</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:rumblesan.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="http://patchwerk.rumblesan.com">PatchWerk</a></li>
  <li><a href="http://rumblesan.tumblr.com">Glitchr</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Simple Sequencing of Synths</h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-17T16:15:19+01:00" pubdate data-updated="true">Jul 17<span>th</span>, 2010</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>So I’ve spent a bit of the last couple of days reading “<a href="http://supercollider.svn.sourceforge.net/viewvc/supercollider/trunk/common/build/Help/Streams-Patterns-Events/A%20Practical%20Guide/PG_01_Introduction.html">A Practical Guide to Patterns</a>” by **H. James Harkins **which is part of the SuperCollider docs and it has really helped me to better understand some of the major ways in which allot of stuff works. Mostly to do with patterns, but also about how synths are actually used within the environment. I definitely recommend it, but don’t get worried if you get lost not too far in, it’s a bit mind boggling after a while.</p>

<p>First things first, I’ve modified the previous code example. The simple FM synth now has a basic volume envelope created by multiplying the output signal by a Line UGen which goes from one to zero over a second and a half. This also has a <strong>doneAction: 2</strong> there, which means that once the line has hit zero the synth gets freed up on the server. Secondly, the send(s) has been changed for a store. This is so that when the SynthDef is sent to the server, information about what controls it has are stored in a library of descriptors. The reason for both of these things will become clearer later.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
</pre></td><td class="code"><pre><code class=""><span class="line">(
</span><span class="line">SynthDef('basic-FM',{
</span><span class="line">
</span><span class="line">    arg freq1 = 440, amp1 = 30,
</span><span class="line">    freq2 = 150, amp2 = 0.5;
</span><span class="line">
</span><span class="line">    var osc1, osc2, output;
</span><span class="line">
</span><span class="line">    osc1 = {SinOsc.ar(freq1) * amp1};
</span><span class="line">    osc2 = {SinOsc.ar(freq2 + osc1) * amp2};
</span><span class="line">
</span><span class="line">    // done action added which
</span><span class="line">    // frees synth once it is finished
</span><span class="line">    output = osc2 * Line.ar(1, 0, 1.5, doneAction: 2);
</span><span class="line">
</span><span class="line">    Out.ar(0,
</span><span class="line">    Pan2.ar(output, 0)
</span><span class="line">    )
</span><span class="line">
</span><span class="line">    // store used instead of send so that
</span><span class="line">    // synth def is caved into the library
</span><span class="line">}).store;
</span><span class="line">)
</span><span class="line">
</span><span class="line">t = Synth('basic-FM',['freq2', 200, 'amp1', 300]);
</span><span class="line">
</span><span class="line">t.free;</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>For the moment if you run the code then, after sending the SynthDef across to the server, every time you evaluate the Synth creation line you will hear a single FM pulse which will trail off over a second and a half. If you evaluate t.free before this has finished then the sound will end as expected. If you try and do it once the sound has stopped, however, then the server will throw you back an error. This is because the synth has already freed itself up thanks to the doneAction command of the Line and so it isn’t there any more to be freed.</p>

<p>When I was first looking into this, it greatly confused me as to why this might be needed. See, I’m used to thinking of objects in programming as being major chunks of code that won’t be created and destroyed all too often (Slightly naive I know but still). You create an object and then you modify its attributes and run its methods and that’s what it’s there for. To my mind a synth in SuperCollider was something that was going to be created once and then modified to play different notes and sounds. I wasn’t really too sure how this worked but that’s what I assumed. Thankfully the Guide to Patterns clarified things quite a bit and the upshot is that this isn’t quite how things work. In some cases it is, but not all the time, and not in the first example I’m giving.</p>

<p>A brief overview of the Objects involved with Sequencing in SuperCollider is probably quite useful. There are Patterns, Streams and Events (There are also things called Routines, they work a bit like Streams but are slightly different, I’ll get to them another day maybe) . Each of these objects plays a different part in basic sequencing. Coincidently, apologies if anybody who knows what they’re talking about feels I’ve got some of this wrong. This is how I currently understand it but please let me know if there are corrections needed.</p>

<h3 id="events">Events</h3>

<p>Events are essentially just one step in a given sequence. Think of it as one note or chord, played on a synth with a given duration and various other parameters that define what that synth should be doing at this moment in time.</p>

<h3 id="streams">Streams</h3>

<p>A Stream is where the events come from. When a Stream is queried it will send return the next event. Once that’s been dealt with, query again and get the next one.</p>

<h3 id="patterns">Patterns</h3>

<p>Patterns are inside streams, when you query the stream it will look at the pattern inside and work out what the next event should be. Patterns are linked to specific parameters so a Stream with multiple Patterns for multiple parameters will return an Event with values for multiple parameters.</p>

<p>Basic pattern sequencing of a synth can be summerised like so.</p>

<ol>
  <li>
    <p>A SynthDef is created, it has some number of arguments and has some form of doneAction</p>
  </li>
  <li>
    <p>This is sent to the server</p>
  </li>
  <li>
    <p>The PBind UGen is used to create a stream, one of the arguments for this will need to be an instrument</p>
  </li>
  <li>
    <p>The PBind also needs to have arguments that are the patterns for each parameter you want to sequence</p>
  </li>
  <li>
    <p>Once the stream is created, start it playing using the play method</p>
  </li>
  <li>
    <p>The stream gets queried, returns the first Event, creates a Synth on the server, sets it playing using the parameters in the event and then waits for the length of the specified duration</p>
  </li>
  <li>
    <p>Once the duration has elapsed the Stream gets queried again and the next event played</p>
  </li>
  <li>
    <p>The synth should free itself up thanks to the doneAction meaning that the server doesn’t run out of resources as more synths get created</p>
  </li>
</ol>

<p>The code below is a basic example of this.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
</pre></td><td class="code"><pre><code class=""><span class="line">(
</span><span class="line">SynthDef('basic-FM',{
</span><span class="line">    arg freq1 = 440, amp1 = 30,
</span><span class="line">    freq2 = 150, amp2 = 0.5;
</span><span class="line">
</span><span class="line">    var osc1, osc2, output;
</span><span class="line">
</span><span class="line">    osc1 = {SinOsc.ar(freq1) * amp1};
</span><span class="line">    osc2 = {SinOsc.ar(freq2 + osc1) * amp2};
</span><span class="line">
</span><span class="line">    // done action added which
</span><span class="line">    // frees synth once it is finished
</span><span class="line">
</span><span class="line">    output = osc2 * Line.ar(1, 0, 1.5, doneAction: 2);
</span><span class="line">
</span><span class="line">    Out.ar(0,
</span><span class="line">    Pan2.ar(output, 0)
</span><span class="line">    )
</span><span class="line">
</span><span class="line">    // store used instead of send so that
</span><span class="line">    // synth def is caved into the library
</span><span class="line">}).store;
</span><span class="line">
</span><span class="line">)
</span><span class="line">
</span><span class="line">(
</span><span class="line">b = Pbind('instrument', "basic-FM",
</span><span class="line">'freq2', Pseq([500, 400, 300, 200], 4),
</span><span class="line">'dur', 0.5);
</span><span class="line">)
</span><span class="line">
</span><span class="line">b.play;</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Playing this through you should get a pattern of four notes, decreasing in pitch and repeating four times, with an interval of half a second between each. It might be fairly obvious what’s happening but lets have a look anyway.</p>

<p>The global variable <strong>b</strong> is used to hold the stream object. The PBind UGen has an instrument argument which tells it to use our basic-FM synth, the freq2 argument is given a Pseq UGen and the dur argument gets a value of 0.5. Clearly the instrument arg is telling the stream what synth to use to play the events and the dur arg sets the duration of these events. The Pseq here is what’s making our notes change. This is a pattern that takes a list of values, a number of times to loop through it and also an offset (not used here). When the stream is queried for the first event, assuming no offset the Pseq pattern returns the first member of the list. Once this event is done with, the Stream is queried again and the Pseq gives it the next member. This carries on until the number of loops has run but can be set to keep playing by giving it an inf value.</p>

<p>An important point here is to go back to the change from send(s) to store. The PBind needs to know what parameters a synth actually has available. These are stored in a SynthDescLib unless you’re sending your SynthDef to the server with send. If you do this then the server will be able to create Synths but the information about it won’t have been entered into the library and so might cause issues with PBind. Using store makes sure that the description is entered into the library and everything works happily. A Quick note, store is actually the description filing version of load(s) and add is the equivalent of send(s).</p>

<p>This is really all there is to basic sequencing, create a stream using PBind and give it arguments specifying the synth, the parameters and the patterns for those parameters then let it run. For more in-depth stuff have a read of the Patterns Guide for some of the ways of nesting, joining and manipulating the myriad of patterns available with SuperCollider. My next piece is probably going to be exploring patterns a bit more as I feel there’s allot of ground to cover without getting to far beyond what I can learn.</p>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">guy</span></span>

      








  


<time datetime="2010-07-17T16:15:19+01:00" pubdate data-updated="true">Jul 17<span>th</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/supercollider/'>SuperCollider</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2010/07/13/scsynth-and-sclang-the-supercollider-client-and-server-explained/" title="Previous Post: SCSynth and SCLang, The SuperCollider Client and Server explained...">&laquo; SCSynth and SCLang, The SuperCollider Client and Server explained...</a>
      
      
        <a class="basic-alignment right" href="/blog/2010/07/28/internet-connected-tomorrow-hopefully/" title="Next Post: Internet Connected Tomorrow……. hopefully">Internet Connected Tomorrow……. hopefully &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/09/11/cuttr-is-now-live-and-running/">Cuttr is now live and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/30/programming-is-good-for-the-soul/">Programming is good for the soul</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/08/organising-domains-and-migrating-sites/">Organising Domains and migrating sites</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/30/glitchr-up-and-running/">Glitchr up and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/24/octopress-customisation/">Octopress Customisation</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/rumblesan">@rumblesan</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'rumblesan',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("rumblesan", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/rumblesan" class="twitter-follow-button" data-show-count="false">Follow @rumblesan</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - guy -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'rumblesan';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://rumblesan.com/blog/2010/07/17/simple-sequencing-of-synths/';
        var disqus_url = 'http://rumblesan.com/blog/2010/07/17/simple-sequencing-of-synths/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
