
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Nodes, Graphs, Groups and Positioning (part 2) - RumbleSan Heavy Noise Industries</title>
  <meta name="author" content="guy">

  
  <meta name="description" content="So here is part two of the series on Nodes, Graphs, Groups and Positioning which will have a bit more code than the last one but shouldn’t be much &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://rumblesan.com/blog/2010/09/29/nodes-graphs-groups-and-positioning-part-2/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="RumbleSan Heavy Noise Industries" type="application/atom+xml">
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
    });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-19842221-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">RumbleSan Heavy Noise Industries</a></h1>
  
    <h2>Noise with weight</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:rumblesan.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="http://patchwerk.rumblesan.com">PatchWerk</a></li>
  <li><a href="http://rumblesan.tumblr.com">Glitchr</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Nodes, Graphs, Groups and Positioning (Part 2)</h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-09-29T10:58:02+01:00" pubdate data-updated="true">Sep 29<span>th</span>, 2010</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>So here is part two of the series on Nodes, Graphs, Groups and Positioning which will have a bit more code than the last one but shouldn’t be much trickier to follow. I’ll specifically be dealing with Positioning here, and how some Nodes need to come after other Nodes to get the results you want.</p>

<p>We’ll start off with the Simple-FM synth that I’ve used previously, it’s very uninteresting but will be good for explaining what we’re doing.</p>

<pre><code>(
SynthDef('basic-FM',{

arg freq1 = 440, amp1 = 30,
freq2 = 150, amp2 = 0.5;

var osc1, osc2;

osc1 = {SinOsc.ar(freq1) * amp1};
osc2 = {SinOsc.ar(freq2 + osc1)};

Out.ar(0,
Pan2.ar(osc2, 0)
)

}).send(s)

t = Synth('basic-FM',['freq2', 200, 'amp1', 100]);

)
</code></pre>

<p>It’s fairly dissonant because we’re going to be putting this through a Low Pass filter and I want it to be obvious when the sound is changing.</p>

<p>Our Low Pass filter code looks like this:-</p>

<pre><code>(

SynthDef('LPFilter',{

arg freq = 1000, inBus, outBus = 0;
var filter;

filter = {LPF.ar(In.ar(inBus), freq)};

Out.ar(outBus,
Pan2.ar(filter, 0)
)
})

)
</code></pre>

<p>There isn’t really much to it, we have a Low Pass filter UGen around an In UGen so it will filter whatever comes in through the audio bus with the cutoff frequency set by the freq variable. Lets put it all together to start things working. We need to modify the FM synth to send its output to an audio bus so we can pipe it into the filter but otherwise not much changes.</p>

<pre><code>(
SynthDef('basic-FM',{

arg freq1 = 440, amp1 = 30,
freq2 = 150, amp2 = 0.5,
outBus = 0;

var osc1, osc2;

osc1 = {SinOsc.ar(freq1) * amp1};
osc2 = {SinOsc.ar(freq2 + osc1)};

Out.ar(outBus,
Pan2.ar(osc2, 0)
)

}).send(s)

SynthDef('LPFilter',{

arg freq = 1000, inBus, outBus = 0;
var filter;

filter = {LPF.ar(In.ar(inBus), freq)};

Out.ar(outBus,
Pan2.ar(filter, 0)
)
}).send(s)

)

d = Bus.audio(s, 1);
t = Synth('basic-FM',['freq2', 200, 'amp1', 100, 'outBus' d]);
f = Synth('LPFilter',['freq', 1000, 'inBus', d]);

f.set('freq', 300);
</code></pre>

<p>…….. if you run and you don’t hear anything, don’t worry, you shouldn’t be.  Let’s go through what’s happening here. We have two Nodes, the basic-FM synth and the LPFilter, and the references to these Nodes are stored in the <strong>t</strong> and <strong>f</strong> variables. Both of these Nodes are in the Global Group because we haven’t told the server to put them anywhere else. We would probably expect that, as we create the filter node after the synth node, everything would be peachy but clearly it’s not quite that simple.</p>

<p>When we create a new synth, there are a few arguments that we miss out, so they take their default values. One of these is called the <em>addAction</em> and we can use it to specify the position in the group that new Nodes take in relation to other Nodes. The default for this is <em>addToHead</em>, so despite us creating the nodes in the order we want, because the Filter Node is created after the synth Node, it will be added to the head of the group it’s in.</p>

<p>There are a couple of ways we can fix this. Obviously we can change the addAction and I’ll get to this in a moment.</p>

<p>A simple solution would be to reverse the order that the nodes are created in, and if you try it out you’ll hear that it works. Have a play with changing the frequency of the filter as well once its working.</p>

<p>We can also manually change the ordering of the nodes. After running the above code with the synth first, use</p>

<pre><code>t.moveBefore(f);
</code></pre>

<p>or</p>

<pre><code>f.moveAfter(t);
</code></pre>

<p>to reorder the nodes. There are a number of messages for node reordering. Have a scour through the docs for more on this.</p>

<p>In the long run, the addActions seem to be the best way to create and keep the order of nodes once we start getting complex. The syntax doesn’t really add much into what we have and it means that we can easily set the order of lots of Nodes with relation to each other. The full list of arguments for the Synth.new method are:-</p>

<p><strong>Synth.new(defName, args, target, addAction)</strong></p>

<p>Where target is a synth or server and add action specifies what we want to do. In this case, we can update the section of code where we create our synths and the audio bus and enclose the whole lot in brackets so we can create it in one go and have the addAction correctly specify the ordering.</p>

<pre><code>(
d = Bus.audio(s, 1);
t = Synth('basic-FM',['freq2', 200, 'amp1', 100, 'outBus', d]);
f = Synth('LPFilter',['freq', 10000, 'inBus', d], t, 'addAfter');
)
</code></pre>

<p>The addAction for the filter synth tells it to position it after node t which means our signal chain is in the correct order and we get sound.</p>

<p>For more info on this, the place to check out is the documentation on <a href="http://supercollider.svn.sourceforge.net/viewvc/supercollider/trunk/common/build/Help/ServerArchitecture/Order-of-execution.html">Order of Execution</a>. It gives more examples and expands on the add actions and some of the other things I’ve shown. The next and possibly final instalment of this series of posts will be about direct Node messaging where we do away with the niceties that the SuperCollider language functions give us and just send direct OSC to Nodes.</p>

<p>Keep playing</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">guy</span></span>

      








  


<time datetime="2010-09-29T10:58:02+01:00" pubdate data-updated="true">Sep 29<span>th</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/programming/'>Programming</a>, <a class='category' href='/blog/categories/supercollider/'>SuperCollider</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2010/09/28/fungeoid-sequencer/" title="Previous Post: Fungeoid Sequencer">&laquo; Fungeoid Sequencer</a>
      
      
        <a class="basic-alignment right" href="/blog/2010/10/05/sequencing-basic-events-in-pure-data/" title="Next Post: Sequencing Basic Events in Pure Data">Sequencing Basic Events in Pure Data &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/09/11/cuttr-is-now-live-and-running/">Cuttr is now live and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/30/programming-is-good-for-the-soul/">Programming is good for the soul</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/08/organising-domains-and-migrating-sites/">Organising Domains and migrating sites</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/30/glitchr-up-and-running/">Glitchr up and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/24/octopress-customisation/">Octopress Customisation</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/rumblesan">@rumblesan</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'rumblesan',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("rumblesan", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/rumblesan" class="twitter-follow-button" data-show-count="false">Follow @rumblesan</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - guy -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'rumblesan';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://rumblesan.com/blog/2010/09/29/nodes-graphs-groups-and-positioning-part-2/';
        var disqus_url = 'http://rumblesan.com/blog/2010/09/29/nodes-graphs-groups-and-positioning-part-2/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
