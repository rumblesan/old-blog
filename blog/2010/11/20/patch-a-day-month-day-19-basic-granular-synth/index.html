
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Patch-a-Day Month Day 19: Basic Granular Synth - RumbleSan Heavy Noise Industries</title>
  <meta name="author" content="guy">

  
  <meta name="description" content="I’m just coming to do today’s patch and I’ve realised that I never actually published this yesterday, it got left in the drafts. So here it is I &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://rumblesan.com/blog/2010/11/20/patch-a-day-month-day-19-basic-granular-synth/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="RumbleSan Heavy Noise Industries" type="application/atom+xml">
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
    });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-19842221-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">RumbleSan Heavy Noise Industries</a></h1>
  
    <h2>Noise with weight</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:rumblesan.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="http://patchwerk.rumblesan.com">PatchWerk</a></li>
  <li><a href="http://rumblesan.tumblr.com">Glitchr</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Patch-a-Day Month Day 19: Basic Granular Synth</h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-20T18:54:34+00:00" pubdate data-updated="true">Nov 20<span>th</span>, 2010</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>I’m just coming to do today’s patch and I’ve realised that I never actually published this yesterday, it got left in the drafts. So here it is I suppose, a bit late but ready. Today’s post which I’m just about to write up carries on from this so this is fairly important heh.</p>

<p>So I’m planning on spending the next couple of days rebuilding a granular synthesis patch I wrote in MaxMSP a while ago. This will partly be so I can extend and improve it, but also because this patch was actually my initial reason for learning SuperCollider so I’m going to spend some time prototyping what I do to it with an aim to port it over once I’m done.</p>

<p>Much of today’s patch will look like the sampler abstraction and that’s because really it is. The stuff here is actually a pretty big improvement on the sampler abstraction so consider it a follow on from that.</p>

<p><img src="/a/2010-11-20-patch-a-day-month-day-19-basic-granular-synth/19-BasicGranularSynth.png" alt="Basic Granular Synth" /></p>

<p>So really there’s nothing here, the important stuff is in the GrainPlayer abstraction but it’s worth pointing out how I’m doing some of the maths here. The start position is specified as a percentage position of the total file length, as is the grain length. (Please note, I’ve realised that there is a mistake in the patch and there should be a divide by 100 object on the length section. I’ll get that fixed later….. probably.)</p>

<p>One of the things I will be adding later are a few LFOs that will modulate the length, speed and position of the grains that are being played. The issue with this is that if you choose a section of the sample to use as a grain that starts or ends too close to the start or end of the sample, the LFOs can end up hitting that limit. To get around this I’ve decided that a grain cant have a starting position in the first or last five percent of the main sample and it cant be longer than four percent of the sample length.</p>

<p><img src="/a/2010-11-20-patch-a-day-month-day-19-basic-granular-synth/19-GrainPlayer.png" alt="Basic Grain Player" /></p>

<p>The grain player is really just like our sample player abstraction, except that here we use a phasor~ instead of a line. In truth this is a much better way of doing things and I should revisit the sampler to improve it. The length specified is the length of the grain section to play back. Because this is specified in samples, we need to convert it to a frequency to pass to the phasor~. This is done by dividing 44100 by the length value. This value can also be multiplied by the speed value at this point.</p>

<p>The output from the phasor~ is then multiplied by the desired length of the grain and a starting offset added. Pump it into a tabread and everything is go.</p>

<p>As well as adding some LFOs to this I’m also going to be doing some volume envelope control as well as showing how to play grains out of phase to help thicken the sound and also to do some interesting stereo panning. Until tomorrow, I leave you with a piece I made with the previous patch.</p>

<p><a href="http://soundcloud.com/tasteforreality/compulsion">Compulsion</a></p>

<p>[soundcloud]<a href="http://soundcloud.com/tasteforreality/compulsion">http://soundcloud.com/tasteforreality/compulsion</a>[/soundcloud]</p>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">guy</span></span>

      








  


<time datetime="2010-11-20T18:54:34+00:00" pubdate data-updated="true">Nov 20<span>th</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/music/'>Music</a>, <a class='category' href='/blog/categories/patch-a-day/'>Patch-A-Day</a>, <a class='category' href='/blog/categories/pure-data/'>Pure Data</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2010/11/18/patch-a-day-month-day-18-live-coding-practise/" title="Previous Post: Patch-a-Day Month Day 18: Live Coding Practise">&laquo; Patch-a-Day Month Day 18: Live Coding Practise</a>
      
      
        <a class="basic-alignment right" href="/blog/2010/11/20/patch-a-day-month-day-20-granular-synth-with-enveloping/" title="Next Post: Patch-a-Day Month Day 20: Granular Synth with Enveloping">Patch-a-Day Month Day 20: Granular Synth with Enveloping &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/09/11/cuttr-is-now-live-and-running/">Cuttr is now live and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/30/programming-is-good-for-the-soul/">Programming is good for the soul</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/08/organising-domains-and-migrating-sites/">Organising Domains and migrating sites</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/30/glitchr-up-and-running/">Glitchr up and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/24/octopress-customisation/">Octopress Customisation</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/rumblesan">@rumblesan</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'rumblesan',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("rumblesan", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/rumblesan" class="twitter-follow-button" data-show-count="false">Follow @rumblesan</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - guy -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'rumblesan';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://rumblesan.com/blog/2010/11/20/patch-a-day-month-day-19-basic-granular-synth/';
        var disqus_url = 'http://rumblesan.com/blog/2010/11/20/patch-a-day-month-day-19-basic-granular-synth/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
