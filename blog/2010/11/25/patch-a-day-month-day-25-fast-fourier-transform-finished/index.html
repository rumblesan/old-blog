
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Patch-a-Day Month Day 25: Fast Fourier Transform Finished - RumbleSan Heavy Noise Industries</title>
  <meta name="author" content="guy">

  
  <meta name="description" content="Right, this will be the last post in patch-a-day month detailing the ins and outs of the Fourier transform. After this I’m just going to carry on &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://rumblesan.com/blog/2010/11/25/patch-a-day-month-day-25-fast-fourier-transform-finished/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="RumbleSan Heavy Noise Industries" type="application/atom+xml">
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
    });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-19842221-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">RumbleSan Heavy Noise Industries</a></h1>
  
    <h2>Noise with weight</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:rumblesan.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="http://patchwerk.rumblesan.com">PatchWerk</a></li>
  <li><a href="http://rumblesan.tumblr.com">Glitchr</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Patch-a-Day Month Day 25: Fast Fourier Transform Finished</h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-25T22:56:04+00:00" pubdate data-updated="true">Nov 25<span>th</span>, 2010</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>Right, this will be the last post in patch-a-day month detailing the ins and outs of the Fourier transform. After this I’m just going to carry on building the patches assuming you can deal with FFT in Pure Data, feel free to ask questions if there are still things that aren’t clear tho.</p>

<p>I’m planning on collecting the content of these articles into one big “FFT How-To” because I feel that the other FFT articles around the internet don’t get the right balance between the maths, the audio and how it actually works. Maybe I’m wrong and I won’t write anything useful but we’ll see.</p>

<p>Last night I mentioned that we would want to change the block size and overlap the Hanning windows and tonight I’m actually going to show how to do that. Pure Data itself actually handles both of the above things itself with very little effort from us which is nice. To change the blocksize we use for the FFT we actually have to change the whole blocksize being used, which sounds tricky, but actually is done using the block~ object. We create a subpatch and put a block~ object inside and with the first argument we can specify what we want the blocksize to be, bearing in mind it has to be a power of 2. I’m going to be using 512 here.</p>

<p>The block object is also responsible for doing the envelope overlapping and we can specify how many envelopes we want to have with the second argument in the block object. I’ll be using 4 overlapping envelopes in this patch. Once we have a subpatch with the block, we just move the Fourier transform stuff into the subpatch and everything works.</p>

<p><img src="/a/2010-11-25-patch-a-day-month-day-25-fast-fourier-transform-finished/25-FFTAnlysisSubpatch.png" alt="Fourier Analysis Subpatch with larger blocksize and enveloping" /></p>

<p>So there are three things to point out here, one is that we’re actually just doing the inverse transform straight away. I’m not doing any processing of the Fourier data, just turning it straight back into audio for the moment.</p>

<p>The second is that the output is also being enveloped again.</p>

<p>The third is that there’s a divide by 768 there which possibly isn’t expected. This is there to normalise the output of the transform and also to counteract the increase due to the overlapping of the envelopes. The output of the Transform will always have a gain increase equal to the blocksize. in this case we need to divide by 512 because that’s our blocksize. With four overlapping envelopes we have an increase in gain 1.5, so to normalise the outgoing audio back to the same volume as the incoming we can just divide by (512 * 1.5) = 768.</p>

<p>If you want to see that the output is the same as the input then here is the full patch.</p>

<p><img src="/a/2010-11-25-patch-a-day-month-day-25-fast-fourier-transform-finished/25-FFTFinished.png" alt="Complete FFT example patch" /></p>

<p>It’s actually possible here to see the delay caused by doing the transform if you look at the offset between the waves in the bottom panes.</p>

<p>I’ll leave that there for tonight so that these three posts stand alone as a tutorial of sorts. Tomorrow I’ll get to some of the cool things you can do with this and hopefully we can just hit the ground running.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">guy</span></span>

      








  


<time datetime="2010-11-25T22:56:04+00:00" pubdate data-updated="true">Nov 25<span>th</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/music/'>Music</a>, <a class='category' href='/blog/categories/patch-a-day/'>Patch-A-Day</a>, <a class='category' href='/blog/categories/pure-data/'>Pure Data</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2010/11/25/patch-a-day-month-day-24-fast-fourier-transform-continued/" title="Previous Post: Patch-a-Day Month Day 24: Fast Fourier Transform Continued">&laquo; Patch-a-Day Month Day 24: Fast Fourier Transform Continued</a>
      
      
        <a class="basic-alignment right" href="/blog/2010/11/27/patch-a-day-month-day-26-fast-fourier-transform-finished/" title="Next Post: Patch-a-Day Month Day 26: FFT based EQ and Delay">Patch-a-Day Month Day 26: FFT based EQ and Delay &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/09/11/cuttr-is-now-live-and-running/">Cuttr is now live and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/30/programming-is-good-for-the-soul/">Programming is good for the soul</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/08/organising-domains-and-migrating-sites/">Organising Domains and migrating sites</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/30/glitchr-up-and-running/">Glitchr up and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/24/octopress-customisation/">Octopress Customisation</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/rumblesan">@rumblesan</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'rumblesan',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("rumblesan", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/rumblesan" class="twitter-follow-button" data-show-count="false">Follow @rumblesan</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - guy -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'rumblesan';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://rumblesan.com/blog/2010/11/25/patch-a-day-month-day-25-fast-fourier-transform-finished/';
        var disqus_url = 'http://rumblesan.com/blog/2010/11/25/patch-a-day-month-day-25-fast-fourier-transform-finished/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
