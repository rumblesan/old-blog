
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>RumbleSan Heavy Noise Industries</title>
  <meta name="author" content="guy">

  
  <meta name="description" content="So This has been dead for a week or two now. Mostly due to my moving into a new place and internet taking a while to sort. This is a pretty weak &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://rumblesan.com/blog/page/13/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="RumbleSan Heavy Noise Industries" type="application/atom+xml">
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
    });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-19842221-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">RumbleSan Heavy Noise Industries</a></h1>
  
    <h2>Noise with weight</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:rumblesan.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="http://patchwerk.rumblesan.com">PatchWerk</a></li>
  <li><a href="http://rumblesan.tumblr.com">Glitchr</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/28/internet-connected-tomorrow-hopefully/">Internet Connected Tomorrow……. Hopefully</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-28T12:54:48+01:00" pubdate data-updated="true">Jul 28<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/07/28/internet-connected-tomorrow-hopefully/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So This has been dead for a week or two now. Mostly due to my moving into a new place and internet taking a while to sort. This is a pretty weak excuse but is hassle-some enough that it got in the way.</p>

<p>Next week once its all working and I’ve finished the next post I’ll get back to updating.</p>

<p>Hold tight</p>

<p>Guy</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/17/simple-sequencing-of-synths/">Simple Sequencing of Synths</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-17T16:15:19+01:00" pubdate data-updated="true">Jul 17<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/07/17/simple-sequencing-of-synths/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So I’ve spent a bit of the last couple of days reading “<a href="http://supercollider.svn.sourceforge.net/viewvc/supercollider/trunk/common/build/Help/Streams-Patterns-Events/A%20Practical%20Guide/PG_01_Introduction.html">A Practical Guide to Patterns</a>” by **H. James Harkins **which is part of the SuperCollider docs and it has really helped me to better understand some of the major ways in which allot of stuff works. Mostly to do with patterns, but also about how synths are actually used within the environment. I definitely recommend it, but don’t get worried if you get lost not too far in, it’s a bit mind boggling after a while.</p>

<p>First things first, I’ve modified the previous code example. The simple FM synth now has a basic volume envelope created by multiplying the output signal by a Line UGen which goes from one to zero over a second and a half. This also has a <strong>doneAction: 2</strong> there, which means that once the line has hit zero the synth gets freed up on the server. Secondly, the send(s) has been changed for a store. This is so that when the SynthDef is sent to the server, information about what controls it has are stored in a library of descriptors. The reason for both of these things will become clearer later.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
</pre></td><td class="code"><pre><code class=""><span class="line">(
</span><span class="line">SynthDef('basic-FM',{
</span><span class="line">
</span><span class="line">    arg freq1 = 440, amp1 = 30,
</span><span class="line">    freq2 = 150, amp2 = 0.5;
</span><span class="line">
</span><span class="line">    var osc1, osc2, output;
</span><span class="line">
</span><span class="line">    osc1 = {SinOsc.ar(freq1) * amp1};
</span><span class="line">    osc2 = {SinOsc.ar(freq2 + osc1) * amp2};
</span><span class="line">
</span><span class="line">    // done action added which
</span><span class="line">    // frees synth once it is finished
</span><span class="line">    output = osc2 * Line.ar(1, 0, 1.5, doneAction: 2);
</span><span class="line">
</span><span class="line">    Out.ar(0,
</span><span class="line">    Pan2.ar(output, 0)
</span><span class="line">    )
</span><span class="line">
</span><span class="line">    // store used instead of send so that
</span><span class="line">    // synth def is caved into the library
</span><span class="line">}).store;
</span><span class="line">)
</span><span class="line">
</span><span class="line">t = Synth('basic-FM',['freq2', 200, 'amp1', 300]);
</span><span class="line">
</span><span class="line">t.free;</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>For the moment if you run the code then, after sending the SynthDef across to the server, every time you evaluate the Synth creation line you will hear a single FM pulse which will trail off over a second and a half. If you evaluate t.free before this has finished then the sound will end as expected. If you try and do it once the sound has stopped, however, then the server will throw you back an error. This is because the synth has already freed itself up thanks to the doneAction command of the Line and so it isn’t there any more to be freed.</p>

<p>When I was first looking into this, it greatly confused me as to why this might be needed. See, I’m used to thinking of objects in programming as being major chunks of code that won’t be created and destroyed all too often (Slightly naive I know but still). You create an object and then you modify its attributes and run its methods and that’s what it’s there for. To my mind a synth in SuperCollider was something that was going to be created once and then modified to play different notes and sounds. I wasn’t really too sure how this worked but that’s what I assumed. Thankfully the Guide to Patterns clarified things quite a bit and the upshot is that this isn’t quite how things work. In some cases it is, but not all the time, and not in the first example I’m giving.</p>

<p>A brief overview of the Objects involved with Sequencing in SuperCollider is probably quite useful. There are Patterns, Streams and Events (There are also things called Routines, they work a bit like Streams but are slightly different, I’ll get to them another day maybe) . Each of these objects plays a different part in basic sequencing. Coincidently, apologies if anybody who knows what they’re talking about feels I’ve got some of this wrong. This is how I currently understand it but please let me know if there are corrections needed.</p>

<h3 id="events">Events</h3>

<p>Events are essentially just one step in a given sequence. Think of it as one note or chord, played on a synth with a given duration and various other parameters that define what that synth should be doing at this moment in time.</p>

<h3 id="streams">Streams</h3>

<p>A Stream is where the events come from. When a Stream is queried it will send return the next event. Once that’s been dealt with, query again and get the next one.</p>

<h3 id="patterns">Patterns</h3>

<p>Patterns are inside streams, when you query the stream it will look at the pattern inside and work out what the next event should be. Patterns are linked to specific parameters so a Stream with multiple Patterns for multiple parameters will return an Event with values for multiple parameters.</p>

<p>Basic pattern sequencing of a synth can be summerised like so.</p>

<ol>
  <li>
    <p>A SynthDef is created, it has some number of arguments and has some form of doneAction</p>
  </li>
  <li>
    <p>This is sent to the server</p>
  </li>
  <li>
    <p>The PBind UGen is used to create a stream, one of the arguments for this will need to be an instrument</p>
  </li>
  <li>
    <p>The PBind also needs to have arguments that are the patterns for each parameter you want to sequence</p>
  </li>
  <li>
    <p>Once the stream is created, start it playing using the play method</p>
  </li>
  <li>
    <p>The stream gets queried, returns the first Event, creates a Synth on the server, sets it playing using the parameters in the event and then waits for the length of the specified duration</p>
  </li>
  <li>
    <p>Once the duration has elapsed the Stream gets queried again and the next event played</p>
  </li>
  <li>
    <p>The synth should free itself up thanks to the doneAction meaning that the server doesn’t run out of resources as more synths get created</p>
  </li>
</ol>

<p>The code below is a basic example of this.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
</pre></td><td class="code"><pre><code class=""><span class="line">(
</span><span class="line">SynthDef('basic-FM',{
</span><span class="line">    arg freq1 = 440, amp1 = 30,
</span><span class="line">    freq2 = 150, amp2 = 0.5;
</span><span class="line">
</span><span class="line">    var osc1, osc2, output;
</span><span class="line">
</span><span class="line">    osc1 = {SinOsc.ar(freq1) * amp1};
</span><span class="line">    osc2 = {SinOsc.ar(freq2 + osc1) * amp2};
</span><span class="line">
</span><span class="line">    // done action added which
</span><span class="line">    // frees synth once it is finished
</span><span class="line">
</span><span class="line">    output = osc2 * Line.ar(1, 0, 1.5, doneAction: 2);
</span><span class="line">
</span><span class="line">    Out.ar(0,
</span><span class="line">    Pan2.ar(output, 0)
</span><span class="line">    )
</span><span class="line">
</span><span class="line">    // store used instead of send so that
</span><span class="line">    // synth def is caved into the library
</span><span class="line">}).store;
</span><span class="line">
</span><span class="line">)
</span><span class="line">
</span><span class="line">(
</span><span class="line">b = Pbind('instrument', "basic-FM",
</span><span class="line">'freq2', Pseq([500, 400, 300, 200], 4),
</span><span class="line">'dur', 0.5);
</span><span class="line">)
</span><span class="line">
</span><span class="line">b.play;</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Playing this through you should get a pattern of four notes, decreasing in pitch and repeating four times, with an interval of half a second between each. It might be fairly obvious what’s happening but lets have a look anyway.</p>

<p>The global variable <strong>b</strong> is used to hold the stream object. The PBind UGen has an instrument argument which tells it to use our basic-FM synth, the freq2 argument is given a Pseq UGen and the dur argument gets a value of 0.5. Clearly the instrument arg is telling the stream what synth to use to play the events and the dur arg sets the duration of these events. The Pseq here is what’s making our notes change. This is a pattern that takes a list of values, a number of times to loop through it and also an offset (not used here). When the stream is queried for the first event, assuming no offset the Pseq pattern returns the first member of the list. Once this event is done with, the Stream is queried again and the Pseq gives it the next member. This carries on until the number of loops has run but can be set to keep playing by giving it an inf value.</p>

<p>An important point here is to go back to the change from send(s) to store. The PBind needs to know what parameters a synth actually has available. These are stored in a SynthDescLib unless you’re sending your SynthDef to the server with send. If you do this then the server will be able to create Synths but the information about it won’t have been entered into the library and so might cause issues with PBind. Using store makes sure that the description is entered into the library and everything works happily. A Quick note, store is actually the description filing version of load(s) and add is the equivalent of send(s).</p>

<p>This is really all there is to basic sequencing, create a stream using PBind and give it arguments specifying the synth, the parameters and the patterns for those parameters then let it run. For more in-depth stuff have a read of the Patterns Guide for some of the ways of nesting, joining and manipulating the myriad of patterns available with SuperCollider. My next piece is probably going to be exploring patterns a bit more as I feel there’s allot of ground to cover without getting to far beyond what I can learn.</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/13/scsynth-and-sclang-the-supercollider-client-and-server-explained/">SCSynth and SCLang, the SuperCollider Client and Server Explained&#8230;</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-13T13:50:08+01:00" pubdate data-updated="true">Jul 13<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/07/13/scsynth-and-sclang-the-supercollider-client-and-server-explained/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So I’m gradually browsing around the SuperCollider docs and finding where useful information is. One of the gems today has been <a href="http://supercollider.svn.sourceforge.net/viewvc/supercollider/trunk/common/build/Help/ServerArchitecture/ClientVsServer.html">this page</a>, which is a simple explanation of the client and server architecture.</p>

<p>This is something that I already sort of knew, but it’s nice to find it in a simple and concise format. The SuperCollider documentation feels, to me at least, overly spread out and requiring far to much digging to get at what a beginner such as myself really needs. This is something I would like to address, but for the moment I feel I’m better off spending my time getting to grips with everything.</p>

<p>I will be starting up a separate page where I will be aggregating the useful and concise information I find. Hopefully it will prove useful to someone.</p>

<p>Anyway, a quick set of bullets about what this helps me understand about SuperCollider.</p>

<ul>
  <li>
    <p>SCSynth doesn’t care about the client. All it wants are OSC messages telling it what to do.</p>
  </li>
  <li>
    <p>SCLang is simply a notepad with an interpreter with a network connection.</p>
  </li>
  <li>
    <p>The actual SuperCollider language is simply a nice scripting language, based on SmallTalk that gets turned into OSC messages.</p>
  </li>
  <li>
    <p>Anything can control the SCSynth, you just have to know what OSC messages to send it.</p>
  </li>
  <li>
    <p>With a lib that does the interpreting and the OSC sending, You can create your own client.</p>
  </li>
</ul>

<p>Most of this is obvious but, again, I like concise information. I know that the Windows version of SuperCollider involves Psycollider in some way, I’m not yet sure how. Investigation needed, and will report back soon.</p>

<p>Guy</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/12/fm-synthesis-a-noisey-hello-world/">FM Synthesis, a Noisey Hello World</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-12T21:22:06+01:00" pubdate data-updated="true">Jul 12<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/07/12/fm-synthesis-a-noisey-hello-world/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So finally some code, a basic FM synth that turns on to generate screechy noises and doesn’t turn off until you tell it to.  This is the beginning part of a grand plan as it happens but I’ll explain that later, first, the code. Apologies for lack of syntax highlighting, I’m planning to write or find a Word-press plug-in that will do it for SuperCollider code but until then it will have to look ugly.</p>

<pre><code>(
SynthDef('basic-FM',{

arg freq1 = 440, amp1 = 30,
freq2 = 150, amp2 = 0.5;

var osc1, osc2;

osc1 = {SinOsc.ar(freq1) * amp1};
osc2 = {SinOsc.ar(freq2 + osc1)};

Out.ar(0,
Pan2.ar(osc2, 0)
)

}).send(s)
)

t = Synth('basic-FM',['freq2', 200, 'amp1', 100]);

t.free;
</code></pre>

<p>This is extremely simple, but I feel it hits all the bases to be a reasonable piece of starting code. I’m not planning to explain this in great depth as it’s all reasonably easy to find in the docs.</p>

<p>We have a SynthDef, to create a new synth. Within the function definition for the synth there are four arguments that have default values and control one of two SinOsc UGens. Two variables are declared and the SinOsc UGen functions are assigned to these with the SinOsc of osc2 having osc1 as a variable of its frequency. The osc2 variable is then stuck in the middle of a Pan2 UGen and fed into the SynthDefs Out UGen. Send it to the server (make sure you do this, I keep forgetting and it’s bloody annoying) and we have a synth ready to be used.</p>

<p>The next couple of lines simple create a synth with a few parameters to override the defaults, assign it to the variable t and then get it playing. Finally, free up t once you’re sick of the sounds its generating.</p>

<p>All very simple and very dull…… it could really do with a few other bits to make it much more interesting, and this is where the plan takes shape. Inspired somewhat by Adam Jansch’s <a href="http://www.adamjansch.co.uk/sc-a-day/">SuperCollider-a-day</a> blog, I’m intending to take this piece of code and gradually add on to it until I have something useful, or I get bored. I doubt very much I’ll be able to do this every day, there are far too many other shiny things to be playing with, but I will update regularly.</p>

<p>The two nebulous aims for the moment will be to add in some envelope functionality to the synth currently and also to learn about sequencing patterns. There will be other bits along the way, and eventually I’ll be working on that big Granular Synth I initially wanted, but for the moment the little FM Synth will strike a nice balance between having lots of sonic possibilities and also being simple enough to modify easily.</p>

<p>Until next time</p>

<p>Guy</p>

<p><strong>EDIT:</strong> I’m attempting to get some sort of SuperCollider specific syntax highlighting going on but its proving slightly tricky. For the moment it at least looks like code, hopefully soon it will have the right colours in the right places.</p>

<p><strong>FURTHER EDIT:</strong> SUCESS!! it seems that my poking about has gotten it working. It’ll be a couple of days before I have it finished and the colours I want sorted out, but a good start I feel.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/11/devices-settings-strangeness/">Devices Settings Strangeness</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-11T23:51:20+01:00" pubdate data-updated="true">Jul 11<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/07/11/devices-settings-strangeness/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So I have SuperCollider working on my laptop, happily running under Windows 7. This in itself has been a bit of a learning curve, however, and this evening whilst helping a friend get his setup working, also on Win7, I discovered another confusing behaviour.</p>

<p>An important part of the whole process was getting the sound punted to the correct audio device. I have a reasonably decent USB ASIO sound card I use when I want good quality, but for just sitting around I find that the <a href="http://www.asio4all.com/">ASIO4ALL</a> drivers are pretty good at giving me a low latency and good stability.</p>

<p>To get SC to use this, I found that its necessary to edit the <strong>startup.sc</strong> file again and un-comment a single line:-</p>

<p><em>s.options.device</em>(“ASIO : ASIO4ALL v2”);_</p>

<p>This can also be sent to SC manually, before booting the server.</p>

<p>I’m yet to find the simple way to get SuperCollider to dump out what devices are available. I’m sure there is a way, but currently I have to see what it says when the server boots up. Mostly I’ll be using ASIO4ALL untill I get something a bit more dedicated and probably *nix based.</p>

<p>With this in mind I set about helping a friend of mine get everything running on his machine, he’d had it throwing errors and was starting to look into Chuck and MiniAudicle because SC wasn’t working. I decided that I’d help, because having someone learning at the same time as I was would be pretty helpful. He is also on Win7 and uses ASIO4ALL so I told him of the above tweak.</p>

<p>Turns out that ASIO4ALL isn’t always for all. No sound from SC, or in fact anything else. Other sound drivers seemed to have issues as well, even after reverting to Microsoft Soundmapper devices, there was still no sound. At this point I felt fairly dis-heartened, thankfully my friend persevered, and we discovered a funny thing. When using the SoundMapper drivers, if there was no mic activated/plugged in, then SC would throw an error and not boot. as soon as the mic was there, it was all fine.</p>

<p>The upshot seems to be that you need to have some input channel going into SC for it to work. ASIO4ALL handles this itself, but if you’re using the standard Microsoft Sound Mapper device, you need to make sure you have your laptop mic enabled, or a mic plugged in to your desktop.</p>

<p>I’m pretty sure there’s work arounds and things to make this all simple but I don’t know what they are yet. I’ll dig around the help files and forums more.</p>

<p>Many thanks to Tonehog for figuring out what was going on with his system so I could put this up here. Hopefully someone will find it useful.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/04/the-supercollider-learning-curve/">The SuperCollider Learning Curve&#8230;.</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-04T23:19:21+01:00" pubdate data-updated="true">Jul 4<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/07/04/the-supercollider-learning-curve/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>…or “How I learnt to stop worrying and get SwingOSC working for SuperCollider on Windows 7”</p>

<p>I’ve been spending at least a couple of hours over the last day getting SuperCollider back up and running on my new laptop. Previously it was running fine on my, now dearly departed, WinXP laptop, but upon getting it installed on Windows 7, whenever I started it, I was greeted by a <strong>“SwingOSC cannot be started”</strong> error.</p>

<p>Most annoying….. Whilst this didn’t stop SuperCollider from working, it did mean that without a fix, I wouldn’t be able to control it from other programs using OSC. Also it’s just the kind of thing that annoys me.</p>

<p>Some Googling later and it seemed that this was a reasonably regular occurrence over multiple OSes and configurations. Unfortunately, the answers ranged between, use an older version of SC, and installing other Linux packages, none of which worked for me. This was after having done various re-installs of the Java run-time and SC itself.</p>

<p>Thankfully, after a bit more googling I found <a href="http://www.mcld.co.uk/supercollider/eee/">http://www.mcld.co.uk/supercollider/eee/</a> which, whilst being aimed at getting SuperCollider running on a Xandros netbook, had some useful info about editing the <strong>startup.sc</strong> file. Two extra lines in the relevant places and I have SwingOSC starting up fine.</p>

<pre><code>GUI.swing;
SwingOSC.program = "SwingOSC.jar";
g = SwingOSC.default;
g.boot;
</code></pre>

<p>With that problem out the way, I can get on with the project at hand. A write up about my adventures making a big Granular Synthesis patch in SC. As well as other of my musical endeavours.</p>

<p>Guy</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/01/saved/">Saved…</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-01T15:01:07+01:00" pubdate data-updated="true">Jul 1<span>st</span>, 2010</time>
        
         | <a href="/blog/2010/07/01/saved/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So I almost actually deleted this whole thing the other night.</p>

<p>I wasn’t too sure that I actually wanted another blog seeing as the other one had fallen by the wayside so much. But the realisation that that was partly down to my not doing any interesting projects currently, and also because Blogger is partially blocked from work. Enough so that making posts isn’t possible without using the email posting functionality, and that’s a bit annoying.</p>

<p>Also, the knowledge that my Boss was reading at points didn’t do much to help.</p>

<p>I’m planning to use this space not only to disseminate my brand of noise, but also to talk about some of the techniques and processes I use and create.  Having my own hosted space on which I can put Max/MSP patches and the like for download will be pretty helpful.</p>

<p>Anyway, tonight I have to finish off a remix for a friend that’s long overdue, but I’ll try and squeeze in a post about something interesting. Possibly a first foray into Granular Synthesis in SuperCollider, a subject I’ve been looking for an excuse to cover for a while.</p>

<p>Until Later, hopefully</p>

<p>Guy</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/24/so-wordpress-it-is/">So WordPress It Is</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-24T23:57:51+01:00" pubdate data-updated="true">Jun 24<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/06/24/so-wordpress-it-is/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>After wrangling with creating my own website, I came to the conclusion that I’m pretty good at building the stuff…. but terrible at designing it.</p>

<p>For this reason I decided to save myself the hassle and just go with wordpress. Less time for coding, more time for music.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/03/13/thread-safe-logging-in-python/">Thread Safe Logging in Python</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-13T17:05:00+00:00" pubdate data-updated="true">Mar 13<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/03/13/thread-safe-logging-in-python/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So the Cluster Farm scripts are coming together nicely and I’ve been leaning an awful lot about threading over the past three weeks. I’m now at the point where in trying to make the whole thing a little more robust I want to have some log files keeping track of what’s going on. For the nodes this will be simple but due to the multi threaded nature of the server script I needed to do something a little more complex. Having multiple threads write to the file at once could potentially cause issues and separate log files is just ugly.</p>

<p>The answer for me was to simply use a thread lock to control writing to the file. I created a python class to abstract all of this away so the threads themselves never see any of the complexity. Here’s the class :-</p>

<pre><code>class LoggingObj():

    def __init__(self):
        self.logFile = 'RenderServer-' + self.TimeStamp() + '.txt'
        self.fileHandle = open(self.logFile, 'a')
        self.logFileLock = threading.Lock()

    def WriteLine(self, logLine):
        self.logFileLock.acquire()
        output = self.TimeStamp() + '  ' + str(logLine) + '\n'
        self.fileHandle.write(output)
        self.logFileLock.release()

    def TimeStamp(self):
        stamp = time.strftime("%Y%m%d%H%M%S")
        return stamp
</code></pre>

<p>When an object is created it will create a text file with a timestamped name, this can then be written to by calling the WriteLine method. The thread locking happens within this object and means that the threads don’t have to deal with it themselves. I’m unsure if this is actually the best way to do things but I’ve run a few tests and it works quite happily and feels elegant.</p>

<p>The quick testing script I used is below. All it does is create the logging object and then fire up a few threads which write stuff to the file in various functions. This is also my first try at using SyntaxHighlighter to make my code look half decent. May take a bit more tweaking to get it to work.</p>

<pre><code>#!/usr/bin/env python

#Import Modules
import os, threading, time

class LoggingObj():

    def __init__(self):
        self.logFile = 'RenderServer-' + self.TimeStamp() + '.txt'
        self.fileHandle = open(self.logFile, 'a')
        self.logFileLock = threading.Lock()

    def WriteLine(self, logLine):
        self.logFileLock.acquire()
        output = self.TimeStamp() + '  ' + str(logLine) + '\n'
        self.fileHandle.write(output)
        self.logFileLock.release()

    def TimeStamp(self):
        stamp = time.strftime("%Y%m%d%H%M%S")
        return stamp

class TestThread(threading.Thread):

    def __init__(self):
        self.blah = None
        threading.Thread.__init__(self)

    def run(self):
        self.TestSelf()
        LogFile.WriteLine(self.name + ': test thread running')
        self.AnotherTest()

    def TestSelf(self):
        time.sleep(1)
        LogFile.WriteLine(self.name + ': Initial test write')

    def AnotherTest(self):
        time.sleep(2)
        LogFile.WriteLine(self.name + ': Second test write')

if __name__ == '__main__':

    global LogFile

    LogFile = LoggingObj()

    serverRunning = True

    LogFile.WriteLine('Cluster Server running')

    for threadNumber in range(4):
        newThread = TestThread()
        newThread.name = 'Test Thread ' + str(threadNumber)
        LogFile.WriteLine('Created ' + newThread.name)
        newThread.start()
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/03/12/see-cluster-run/">See Cluster Run</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-12T19:42:00+00:00" pubdate data-updated="true">Mar 12<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/03/12/see-cluster-run/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The Render Farm Lives!!</p>

<p>After two weeks of coding Python and learning a considerable amount in the process I have scripts that allow me to split rendering jobs between the nodes. There was a slight change in the layout, the cluster now consists of four nodes and one head, and this helps to make the whole thing significantly more compact and means I don’t have to go hunting for other machines.</p>

<p>The scripts are still in need of a bit of work to make them more robust but as always everything can be found on my Git-hub repository <a href="http://github.com/rumblesan/ClusterRay">http://github.com/rumblesan/ClusterRay</a></p>

<p>There is code for the server and node scripts as well as a simple client used to send jobs to the server. It’s all a bit inefficient since it relies on sending around Tarred folders with the server running an FTP server as well but it works. Overall the time spent transferring small files over the network is minuscule given that the rendering takes minutes to hours.</p>

<p>Despite protestations from friends that it was far more complex than it needed to be I’m quite pleased with the design.</p>

<p>The server starts up and immediately creates another two threads, one to run the FTP server (using the excellent <a href="http://code.google.com/p/pyftpdlib/">pyftpdlib</a>) and the second to manage splitting up the task. It then sits and waits for connections over the network. The nodes all connect to the server and then wait until they are told they have a job to do. The server creates a new thread for each node that connects. Upon the client connecting to the server, a thread is created which will sit around waiting for the client to send data over the socket.</p>

<p>Simple enough so far I hope, the threading took a bit of time for me to get my head around but it certainly feels much easier follow.</p>

<p>The client is pretty simple; you pass it the name of a folder which contains the necessary Povray files as well as a config file which details the job information and command line settings. This gets Tarred up and uploaded to the ftp server. The client then tells the server the name of the tar file.</p>

<p>The server gets this and adds it to a queue; the task thread gets the job, reads the config file, creates the specified number of jobs with the defined command line parameters and then adds these to a job queue. The node threads will grab their jobs from here and send them to the node scripts running on the networked machines.</p>

<p>The nodes get the job info which contains the tar file name, the command line parameters and the output file name (this could all be done better but it works for the moment). From here they download the tar file, untar it and then run the job in ovary. Once it’s done they upload the output file to the FTP server, and tell the node thread they’re done. If there are more jobs in the queue then the node thread grabs one and sends it off again.</p>

<p>Once the job queue is empty the task manager thread joins all the output pictures together into a whole image. It will then check to see if there are any more tasks in the task queue. This way it is possible to send multiple tasks over with the client and have the cluster just run them all through one after the other.</p>

<p>I’m currently wrangling with getting the python scripts to run as daemons on Linux so that they will start up as soon as I bring the servers up. I successfully managed to do it last night with the main server using the bash script in the repository and the Ubuntu forums.</p>

<p>There’s still plenty of code to do and realistically I’m more interested in doing movies than single images so that’s the next step. There’s some code in the misc folder which contains a python class to interpolate values frame by frame for a variable, just a question of squeezing this together and getting it to successfully create jobs now.</p>

<p>Onwards and upwards I suppose</p>

<p>Guy</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/14/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/12/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/09/11/cuttr-is-now-live-and-running/">Cuttr is now live and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/30/programming-is-good-for-the-soul/">Programming is good for the soul</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/08/organising-domains-and-migrating-sites/">Organising Domains and migrating sites</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/30/glitchr-up-and-running/">Glitchr up and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/24/octopress-customisation/">Octopress Customisation</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/rumblesan">@rumblesan</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'rumblesan',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("rumblesan", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/rumblesan" class="twitter-follow-button" data-show-count="false">Follow @rumblesan</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - guy -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'rumblesan';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
