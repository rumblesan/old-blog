
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>RumbleSan Heavy Noise Industries</title>
  <meta name="author" content="guy">

  
  <meta name="description" content="Apologies for missing yesterday, I was at the London Hackspace for the weekly music hackers meetup that’s been gathering steam and I find that now I  &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://rumblesan.com/blog/page/4/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="RumbleSan Heavy Noise Industries" type="application/atom+xml">
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
    });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-19842221-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">RumbleSan Heavy Noise Industries</a></h1>
  
    <h2>Noise with weight</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:rumblesan.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="http://patchwerk.rumblesan.com">PatchWerk</a></li>
  <li><a href="http://rumblesan.tumblr.com">Glitchr</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/18/patch-a-day-november-2011-day-15-data-structure-basics-part-2/">Patch-a-Day November 2011 Day 15: Data Structure Basics (Part 2)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-18T23:46:45+00:00" pubdate data-updated="true">Nov 18<span>th</span>, 2011</time>
        
         | <a href="/blog/2011/11/18/patch-a-day-november-2011-day-15-data-structure-basics-part-2/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Apologies for missing yesterday, I was at the London Hackspace for the weekly music hackers meetup that’s been gathering steam and I find that now I know a few more people there I quickly get sucked in and don’t get around to working on the patches like I should be.</p>

<p>I’ve also realised that, unlike last time I did the patch a day month, I have a lot more projects and a fair bit more socialising going on. So I think I’m going to not worry too heavily about getting a new patch done every evening and instead just concentrate on getting them done in a timely manner and making them good. That said, “Patch-a-day-ish Month plus some days” doesn’t have the same ring to it.</p>

<p>Anyway, onto the patch for tonight. Getting data from specific positions in a data structure list.</p>

<p><img src="/a/2011-11-18-patch-a-day-november-2011-day-15-data-structure-basics-part-2/getting-specifics.png" alt="Getting specific values from a data structure" /></p>

<p>The left hand side is the template, struct and data window which should be familiar to you now. The right hand section can be used to automatically fill a data structure list with some data. It sets the pointer to the head of the list and sends it to the append object. Then it increments a counter using the until object and gives each of these values to the append as data, quickly filling it up.</p>

<p>The central section is the important part here. It takes an integer and then outputs the value stored at that position in the data structure. To do this, first the pointer object is given a traverse message, setting it so that it points to the head of the list. The until object then sends out the specified number of bangs which trigger next messages, incrementing the position of the list pointer.</p>

<p>Because we only want the specific value and not all the values, the pointer value that comes out at each next message is stored in a second pointer object. These work pretty much like float objects where a value passed into the right inlet is stored but not output. Once the until has stopped the value from the second pointer is output to the get object which puts out our value.</p>

<p>It’s worth mentioning the bang object hanging off the first pointer. This is so that if we give a value greater than the length of the list we won’t get errors being printed out. When the ‘next’ messages cause the pointer to hit the end of the list it will output a bang from the right outlet, this is sent to the until to stop it running so we end up just getting the last value.</p>

<p>Next stop is setting specific values in lists, then I’m going to start tackling some of the visual stuff you can do.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/17/patchwerk-radio-back-on-the-air/">PatchWerk Radio Back on the Air</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-17T00:31:36+00:00" pubdate data-updated="true">Nov 17<span>th</span>, 2011</time>
        
         | <a href="/blog/2011/11/17/patchwerk-radio-back-on-the-air/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>PatchWerk Radio is back up and running properly now. I’ve found a host with much more grunt and it’s running alone very merrily at this point.</p>

<p>Tune in at <a href="http://radio.rumblesan.com:8000/radio.ogg">http://radio.rumblesan.com:8000/radio.ogg</a></p>

<p>Feels like I’m actually getting on top of everything a bit now</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/16/patch-a-day-november-2011-day-14-data-structure-basics-part-1/">Patch-a-Day November 2011 Day 14: Data Structure Basics (Part 1)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-16T23:15:54+00:00" pubdate data-updated="true">Nov 16<span>th</span>, 2011</time>
        
         | <a href="/blog/2011/11/16/patch-a-day-november-2011-day-14-data-structure-basics-part-1/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Starting at the beginning with data structures. There’s a lot to take in, but it’s pretty cool once you get down to it. I found the old patches I wrote when I was getting to grips with it all the first time round which is pretty helpful but this time I’ll actually write things down heh.</p>

<p>First up, you can think of Data Structures in PD as lists of items, where each list has a specific name, and the items they contain can be floats, symbols, arrays, or a list of other data structures. To navigate around these lists you use pointers, which literally just point to a position on the list.</p>

<p>When creating a patch that uses data structures, there are three parts that really make the structure. These are a template, a struct and a datawindow. The template is a subpatch that contains a struct. The struct defines what data the structure contains and the datawindow will contain the data.</p>

<p>The data is stored as an ordered list of scalars, where a scalar would contain an entry for each of the values defined in the struct. The lists are navigated by using pointers, one of the PD data types, that literally just point to a single scalar in the list.</p>

<p>Lets have a look at a patch to try and clear some of this up.</p>

<p><img src="/a/2011-11-16-patch-a-day-november-2011-day-14-data-structure-basics-part-1/basic-structure1.png" alt="Basic data structure" /></p>

<p>In the top left are the three objects that make up the data structure. The template1 subpatch contains a single struct object. The struct defines a structure called struct1 with a single field, the float a. The datawindow1 subpatch has no objects in it. One thing to note at this point, the name of the struct has to be unique throughout PD otherwise you’ll get an error being thrown, the same goes for the datawindow.</p>

<p>Now that the data object has been constructed, we need to add some data to it and we can do this using the append object. This takes a pointer into its rightmost inlet and then the values to store are entered using the other inlet. Append is given the name of the struct that it will be modifying and also an argument for each value in the struct we want to modify. If you have a struct with multiple values then you don’t need to modify all of them.</p>

<p>The pointer object gets given a message to tell it which datawindow it’s pointing to and then a bang to get it to output the value of its current pointer. When we first initialise it with a traverse message the pointer will point to the head of the list. This isn’t actually a scalar but is the position in front of the first scalar element so any value appended to it will get added after this. The pointer goes to the append object to tell it where it will be appending the values.</p>

<p>Sending the pointer a next message will get it to move to the next scalar in the list, to begin with that will result in an error because there aren’t any other values, but if there were it would mean we could append after any position in the list.</p>

<p>The append object will increment the pointer it has itself, so all that’s needed is to send it the pointer then send whatever values we want to store in the left inlet.</p>

<p>To retrieve them you can use the get object. This works in a similar way to append with the arguments tell it what struct and what values it’s dealing with and the pointer telling it which scalar to retrieve. This time it’s necessary to step through manually and you can do that with next.</p>

<p>Here’s an example of how easy it is to extend this to more float values if you want.</p>

<p><img src="/a/2011-11-16-patch-a-day-november-2011-day-14-data-structure-basics-part-1/multiple-values.png" alt="Data structure with multiple values" /></p>

<p>Not sure I’ll be able to get another post out tonight unfortunately, relearning this stuff has been a bit of a crash course and took longer than I expected. Either way, I know the direction I’ll be heading with this over the next few days so I shouldn’t have any problems working out what I want to patch.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/15/patch-a-day-november-2011-day-13-euclidean-drums/">Patch-a-Day November 2011 Day 13: Euclidean Drums</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-15T18:29:20+00:00" pubdate data-updated="true">Nov 15<span>th</span>, 2011</time>
        
         | <a href="/blog/2011/11/15/patch-a-day-november-2011-day-13-euclidean-drums/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Have some drums! A full, working drum sequencer patch, borrowing liberally from the excellent rjlib for a decent drum synth and hooking it up to the Euclidean sequencers we’ve made.</p>

<p><img src="/a/2011-11-15-patch-a-day-november-2011-day-13-euclidean-drums/Euclidean-drums.png" alt="Euclidean drums" /></p>

<p>I modified the sequencers a bit more so they contain their own controls, makes the whole thing look a bit better and makes it easier to patch. The clock is primitive but functional and the sounds are minimal but suitable. I’m going to leave it at this for the Euclidean stuff, I’m pretty chuffed that I managed to get it all working in vanilla PD but it’s time to move on. Tomorrow night I have a spare evening so I’m going to concentrate on the data structures and should be able to catch up the days I owe. You can grab the patches from the repository, or here’s a download instead. Happy tweaking</p>

<p><a href="/a/2011-11-15-patch-a-day-november-2011-day-13-euclidean-drums/Day-13_Euclidean_Drums.tar">Pure Data Euclidean Drums Patch</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/14/patch-a-day-november-2011-day-12-euclidean-sequencer/">Patch-a-Day November 2011 Day 12: Euclidean Sequencer</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-14T18:39:51+00:00" pubdate data-updated="true">Nov 14<span>th</span>, 2011</time>
        
         | <a href="/blog/2011/11/14/patch-a-day-november-2011-day-12-euclidean-sequencer/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So here’s the abstraction for a single Euclidean sequencer. Give it a number of beats and the length of the measure and it will create your pattern. Feed it bangs and it will give you out more bangs in the right sequence. There’s even the ability to change the phase of the sequence or reset it with a simple bang.</p>

<p><img src="/a/2011-11-14-patch-a-day-november-2011-day-12-euclidean-sequencer/Euclidean-sequence-abstraction.png" alt="Euclidean sequence abstraction" /></p>

<p>I’m afraid I haven’t been able to get as much done as I’d hoped, once you’re behind it’s difficult to get back on target but I’ll make sure I catch up soon. Anyway, this should keep you all amused for a little while. The abstraction can be downloaded from the git repository and should be just a matter of drop and go.</p>

<p>Enjoy</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/13/patch-a-day-november-2011-day-11-basic-sequencer/">Patch-a-Day November 2011 Day 11: Basic Sequencer</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-13T16:29:20+00:00" pubdate data-updated="true">Nov 13<span>th</span>, 2011</time>
        
         | <a href="/blog/2011/11/13/patch-a-day-november-2011-day-11-basic-sequencer/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Generating patterns is all well and good, but we actually have to be able to play them back. I’m going to start off with a basic sequencer and combining the Euclidean Sequence generator into a sequencer voice. To begin with I’m just going to do this with tables. I’ve got a plan for some time next week to start getting into the PD data structures stuff again which will make it possible to create much more powerful sequencers but there’s no need to go getting overly complex yet.</p>

<p><img src="/a/2011-11-13-patch-a-day-november-2011-day-11-basic-sequencer/Basic-sequencer1.png" alt="Basic sequencer" /></p>

<p>Starting on the left, I’m reusing the list serialisation patch here from the first list manipulation examples I did. A list comes in, it’s length gets stored in a variable and used to resize the table, a counter gets reset to zero and then the list gets serialised. As each list element gets sent out, it triggers the next number from the counter. These are used with the tabwrite object to write the data into the sequence table.</p>

<p>On the right hand side there’s the table object which just stores the data. I haven’t bothered using $0arguments here to make this abstraction safe yet but I’ll do that later. Below that there’s a pretty typical metro/counter setup that reads the values out of the table. At the moment the counter will just keep going and reset itself once it hits the length of the current sequence and the sequence can be changed whilst it’s running. This may not be desired behaviour, depends on what you’re doing.</p>

<p>Adding the Euclidean pattern creator abstraction into this is now really easy.</p>

<p><img src="/a/2011-11-13-patch-a-day-november-2011-day-11-basic-sequencer/Euclidian-rhythm-sequencer.png" alt="Euclidean rhythm sequencer" /></p>

<p>Really really easy.</p>

<p>At the moment the erhythm abstraction will generate an output pattern whenever one of the input values changes, which isn’t quite in keeping with PD convention of hot and cold inlets but personally I think it’s a little more useful here. Again, it depends what you’re after and shouldn’t be difficult to change.</p>

<p>The next step is to turn this all into a single abstraction and then make a full drum sequencer with it. I think that I’ll get that done now and post it and then take a bit of a break for the rest of today. I know I’m still one patch behind but I’ll catch up on Monday night. Then I need to start getting into the data structures again.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/13/patch-a-day-november-2011-day-10-euclidean-rhythms-part-3/">Patch-a-Day November 2011 Day 10: Euclidean Rhythms (Part 3)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-13T14:39:59+00:00" pubdate data-updated="true">Nov 13<span>th</span>, 2011</time>
        
         | <a href="/blog/2011/11/13/patch-a-day-november-2011-day-10-euclidean-rhythms-part-3/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Right, back on track, mostly recovered from an active weekend and have cracked getting PD Extended running under Lubuntu (might do a post on this at some point)</p>

<p>Here, as promised, is an abstraction that will generate Euclidean Rhythmic sequences when given a number of beats and the measure length.</p>

<p><img src="/a/2011-11-13-patch-a-day-november-2011-day-10-euclidean-rhythms-part-3/Euclidian-rhythm-abstraction.png" alt="Euclidean rhythm abstraction" /></p>

<p>There have been a few changes since the patch earlier this week and I spent a bit of time wrestling to clear up some awkward bugs that were difficult to track down because of all the recursion here.</p>

<p>The left hand side is where the beats and measure length values get parsed and then the lists of ones and zeros created. There’s some logic here to limit the values a bit, so that the number of beats can never exceed the measure length, and neither value can go below zero.</p>

<p>To the right of this is a series of objects that check to see if either of the input lists is zero length. I found that there’s a bit of a problem with the list matching and interleaving if one of the input lists is empty and it would require a lot of changes to the logic involved to cope with it. Instead I decided it would be a better idea to just check before hand. If one of the lists is zero then they get joined (so you don’t need to check which is empty) and then output straight away. Otherwise they go to the Euclidean Calculation step.</p>

<p>Finally the routing to check if we recur or not is neatened up a bit and I’ve introduced a tiny delay. This is done so because otherwise PD will complain about buffer overrun errors because the patch is trying to calculate too much in one cycle. By introducing the delay we can spread the calculations over more cycles and we won’t push things too much.</p>

<p>There were also a couple of small bugs I fixed in the interleave and lmatch objects but they’re otherwise untouched.</p>

<p>Check out the repository for the abstraction and an example.</p>

<p>Next up, using this with a sequencer.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/10/buffer-under-run-error/">Buffer Under-run Error!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-10T22:30:11+00:00" pubdate data-updated="true">Nov 10<span>th</span>, 2011</time>
        
         | <a href="/blog/2011/11/10/buffer-under-run-error/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Unfortunately die to technical difficulties and prior engagements (OS update and beer festival) I’m going to be unable to patch until Sunday.  </p>

<p>I’ll aim to get everything done and written up by then and I’ll come up with something else interesting to make up for the delay.  </p>

<p>The lesson here is to make sure you have enough posts stored up incase of emergency, and not to reinstall ubuntu on the laptop used for patching when away from home, only to find you can’t get pd installed.  </p>

<p>At least my weekend will be fun.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/09/patch-a-day-november-2011-day-9-euclidean-rhythms-part-2/">Patch-a-Day November 2011 Day 9: Euclidean Rhythms (Part 2)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-09T23:34:16+00:00" pubdate data-updated="true">Nov 9<span>th</span>, 2011</time>
        
         | <a href="/blog/2011/11/09/patch-a-day-november-2011-day-9-euclidean-rhythms-part-2/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Putting everything together now. This patch will actually output a rhythm sequence from two given input lists. It’s using the improved list matching abstraction from last night along with the list interleaving patch and then some extra objects to do routing and element length measurement of the remainder to see if we need to recur any more.</p>

<p><img src="/a/2011-11-09-patch-a-day-november-2011-day-9-euclidean-rhythms-part-2/Euclidian-rhythm-generation.png" alt="Euclidian rhythm generation" /></p>

<p>When the remainder is output from the lmatch, we check how many elements there are in it. If the number is one or less then we don’t need to do any recursion and we can just join the two lists and output our sequence, otherwise the lists need to be sent round again. The routing is done by pre-pending ”recur” or “output” to the front of the lists then routing them accordingly. This feels a bit clunky but I think it’s better than using pairs of spigots. If we don’t need to recur then the remainder is joined to the output of the interleaving and that’s the sequence. Otherwise the output becomes the main list and the remainder the sublist.</p>

<p>The interleave abstraction has been updated a bit so that it will keep track of and increment the element size of the list accordingly. I find it quite amusing that actually the whole thing now just boils down to these two objects and a bit of recursion. Initially when I was wrestling with this it felt really difficult to do. Now I’m pretty sure these objects could be simplified a lot and something quite efficient can be made. This algorithm is still trickier to implement in PD than I’d like but it’ll do.</p>

<p>Tomorrow night I’ll polish this patch up a bit and turn it into an abstraction that can be used easily in a patch and by the weekend I’ll hopefully have a working sequencer running.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/08/patch-a-day-november-2011-day-8-euclidean-rhythms-part-1/">Patch-a-Day November 2011 Day 8: Euclidean Rhythms (Part 1)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-08T23:51:46+00:00" pubdate data-updated="true">Nov 8<span>th</span>, 2011</time>
        
         | <a href="/blog/2011/11/08/patch-a-day-november-2011-day-8-euclidean-rhythms-part-1/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Right, enough list processing for the moment, lets get down to what we were aiming for. Euclidean Rhythms are rhythms generated using an algorithm very similar to <a href="http://en.wikipedia.org/wiki/Euclidean_algorithm">Euclid’s Algorithm</a> for computing the greatest common divisor of two numbers. What it does for us is it means we can evenly distribute a number of hits into a given number of beats and it just so happens that this actually generates some well known drum patterns from various musical styles.</p>

<p>It’s worth going and reading <a href="http://cgm.cs.mcgill.ca/~godfried/publications/banff.pdf">this paper by Godfried Toussaint</a> and this <a href="http://ruinwesen.com/blog?id=216">blog post from Ruin and Wesen</a> for more in depth discussion but I hope to explain how this works in a fairly simple manner. First up, lets have an example.</p>

<p>We want to evenly spread 3 hits into an 8 beat space, this means there will be 3 beats and 5 spaces. The sequence will be described as lists of ones for hits and zeros for spaces and we’ll start off with two separate lists. The diagram below should easily show how the lists are interleaved together until the remained reaches zero or one. This diagram uses columns to denote elements of multiple items.</p>

<p><img src="/a/2011-11-08-patch-a-day-november-2011-day-8-euclidean-rhythms-part-1/Euclidian-Rhythm-38.png" alt="Euclidian Rhythm (3,8)" /></p>

<p>At each step, you take the current remainder, interleave it with the main list and take any remainder left. You keep interleaving the two lists until the length of the remainder list is one or less, then just read out the list. So above, When we interleave the list of five zeros into the list of three ones, we have a remainder of two. This is greater than one so we interleave this into the main list again and the remainder this time is a single element.</p>

<p>This works just as well if we started with more ones than zeros as well.</p>

<p><img src="/a/2011-11-08-patch-a-day-november-2011-day-8-euclidean-rhythms-part-1/Euclidian-Rhythm-58.png" alt="Euclidian Rhythm (5,8)" /></p>

<p>After wrestling for a couple of evenings over how to do this in PD, I decided that the simplest way to do it would be to use a combination of the list length matching abstraction and the interleaving abstraction from the previous two days, and then just keep track of the element size of the main list and remainder. The work flow is pretty simple</p>

<ul>
  <li>
    <p>Start with two lists of single element items, the main list is ones and the sub list is zeros</p>
  </li>
  <li>
    <p>Get the excess elements from the longer list, this is the remainder</p>

    <ul>
      <li>The element size of the remainder is the same as whichever list it came from</li>
    </ul>
  </li>
  <li>
    <p>Interleave the main list and the sub list, element by element to get the output list</p>
  </li>
  <li>
    <p>Check the number of elements in the remainder</p>

    <ul>
      <li>
        <p>If it’s one or less then join the output list and the remainder to get your rhythm pattern</p>
      </li>
      <li>
        <p>If it’s greater than one, send the output list and the remainder back through the process</p>
      </li>
    </ul>
  </li>
</ul>

<p>The first thing that’s needed for this is a modified list length matching patch and that’s what I’ve built this evening. The previous list matcher would give you out the excess section, but would leave you to externally work out which list it came from and what the element size is. Really, this should be handled inside this patch so that we give it two lists and their element size, and we get out three lists with their element sizes.</p>

<p><img src="/a/2011-11-08-patch-a-day-november-2011-day-8-euclidean-rhythms-part-1/improved-list-splitting.png" alt="Improved list length matching" /></p>

<p>The patch here does much the same as the previous version but I’ve moved around the logic a little to try and make things more understandable. I’m using the PD value objects which I discovered the other night and I wish I’d used them sooner. The major change to the behaviour is the section in the middle/right where we compare the number of elements in each list. If the main list is greater in length than the sub list then that’s where the remainder will come from, meaning the remainder’s element size will match the main lists. If the sub list is longer then the remainder will come from here so it’s element size will match the sub list’s.</p>

<p>In this way, we now get out the three lists and their element sizes. Tomorrow night I’ll tie this into the interleaving and recursion and generate the patterns themselves.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/5/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/3/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/09/11/cuttr-is-now-live-and-running/">Cuttr is now live and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/30/programming-is-good-for-the-soul/">Programming is good for the soul</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/08/organising-domains-and-migrating-sites/">Organising Domains and migrating sites</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/30/glitchr-up-and-running/">Glitchr up and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/24/octopress-customisation/">Octopress Customisation</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/rumblesan">@rumblesan</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'rumblesan',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("rumblesan", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/rumblesan" class="twitter-follow-button" data-show-count="false">Follow @rumblesan</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - guy -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'rumblesan';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
