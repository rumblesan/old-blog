
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Patch-a-Day November 2011 Day 19: Data Structure Basics (part 6) - RumbleSan Heavy Noise Industries</title>
  <meta name="author" content="guy">

  
  <meta name="description" content="Arrays in data structures are a little tricky it seems. Not too tricky, but they require a couple of extra objects and like symbols, it seems that &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://rumblesan.com/blog/2011/11/22/patch-a-day-november-2011-day-19-data-structure-basics-part-6/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="RumbleSan Heavy Noise Industries" type="application/atom+xml">
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
    });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-19842221-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">RumbleSan Heavy Noise Industries</a></h1>
  
    <h2>Noise with weight</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:rumblesan.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="http://patchwerk.rumblesan.com">PatchWerk</a></li>
  <li><a href="http://rumblesan.tumblr.com">Glitchr</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Patch-a-Day November 2011 Day 19: Data Structure Basics (Part 6)</h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-22T22:20:49+00:00" pubdate data-updated="true">Nov 22<span>nd</span>, 2011</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>Arrays in data structures are a little tricky it seems. Not too tricky, but they require a couple of extra objects and like symbols, it seems that you can’t have a scalar with just arrays. This is because to modify an array field in a data structure scalar, you need to first create that scalar, and you can apparently only create a scalar using a float sent into an append object. If I’ve got this wrong then someone feel free to tell me.</p>

<p>Anyway, there are three new objects to use with data structure arrays, setsize and getsize should be pretty obvious, element maybe not so much. Have a look at the patch and I’ll go through what’s going on.</p>

<p><img src="/a/2011-11-22-patch-a-day-november-2011-day-19-data-structure-basics-part-6/array-data-structure.png" alt="Array manipulation in data structures" /></p>

<p>There are now two templates in the patch, each of which contains a struct. The first struct is called struct 1, it defines a float field called a, and an array field called array1. When defining an array it’s necessary to give a third argument which is the name of a struct that will hold the array information. That second struct is held in the second template, is called testarray and has a single field, y.</p>

<p>Two things worth pointing out here. First, you can draw arrays in data windows like we did with the polygons, and like with the polygons, the field y is special. This is the value that will be used to draw the height of the polygon. This actually leads into the second point, the struct that’s used to define the array is really just a normal struct, and so can store data in the same way. If you download the repository then there’s a second patch called nested structures, where this second array has another float field and a symbol field. This should explain somewhat why the y field is special, because it’s just the same as with regular polygons and data structures. In short, a data structure array is actually just an array of other nested data structures.</p>

<p>In the top right of the patch there’s an append setup. This is just there so that when the patch loads a new scalar object is created in struct 1. This needs to be done because to operate on the array, we have to have an array in the first place.</p>

<p>Below this is the interesting stuff. First a pointer object is told to traverse the datawindow and then increment onto the first scalar element, the one created above. This goes to a setsize and getsize object which, unsurprisingly, set and get the size of the array. All arrays have a minimum of one scalar element.</p>

<p>The pointer also goes to the element object, which has arguments pointing it to the data structure struct1, and the field array1. This object takes a float in the left inlet and will send out a pointer to that position in the array. It plays the role of the until + counter setup we’ve previously used to get to specific scalars in a data structure. Bear in mind that you can only get a pointer to a scalar in the array that exists, so better increase the size of the field using setsize.</p>

<p>The pointer from element can be passed to set and get objects which work exactly like they do with normal data structure scalars.</p>

<p>Have a play and investigate, it’s pretty much the best way to get a grasp of what’s going on here. Once you have it however it should be pretty useful, especially with the preset patches that I will get to tomorrow.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">guy</span></span>

      








  


<time datetime="2011-11-22T22:20:49+00:00" pubdate data-updated="true">Nov 22<span>nd</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/patch-a-day/'>Patch-A-Day</a>, <a class='category' href='/blog/categories/pure-data/'>Pure Data</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2011/11/21/patch-a-day-november-2011-day-18-data-structure-basics-part-5/" title="Previous Post: Patch-a-Day November 2011 Day 18: Data Structure Basics (part 5)">&laquo; Patch-a-Day November 2011 Day 18: Data Structure Basics (part 5)</a>
      
      
        <a class="basic-alignment right" href="/blog/2011/11/23/patch-a-day-november-2011-day-20-preset-saving/" title="Next Post: Patch-a-Day November 2011 Day 20: Preset saving">Patch-a-Day November 2011 Day 20: Preset saving &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/09/11/cuttr-is-now-live-and-running/">Cuttr is now live and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/30/programming-is-good-for-the-soul/">Programming is good for the soul</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/08/organising-domains-and-migrating-sites/">Organising Domains and migrating sites</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/30/glitchr-up-and-running/">Glitchr up and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/24/octopress-customisation/">Octopress Customisation</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/rumblesan">@rumblesan</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'rumblesan',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("rumblesan", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/rumblesan" class="twitter-follow-button" data-show-count="false">Follow @rumblesan</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - guy -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'rumblesan';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://rumblesan.com/blog/2011/11/22/patch-a-day-november-2011-day-19-data-structure-basics-part-6/';
        var disqus_url = 'http://rumblesan.com/blog/2011/11/22/patch-a-day-november-2011-day-19-data-structure-basics-part-6/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
