
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Patch-a-Day November 2011 Day 5: List Processing (part 2) - RumbleSan Heavy Noise Industries</title>
  <meta name="author" content="guy">

  
  <meta name="description" content="Yesterdays post started with some basic list processing in pure data, the patches showed how you could serialise and interleave the lists but there &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://rumblesan.com/blog/2011/11/05/patch-a-day-november-2011-day-5-list-processing-part-2/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="RumbleSan Heavy Noise Industries" type="application/atom+xml">
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
    });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-19842221-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">RumbleSan Heavy Noise Industries</a></h1>
  
    <h2>Noise with weight</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:rumblesan.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="http://patchwerk.rumblesan.com">PatchWerk</a></li>
  <li><a href="http://rumblesan.tumblr.com">Glitchr</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Patch-a-Day November 2011 Day 5: List Processing (Part 2)</h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-05T17:57:06+00:00" pubdate data-updated="true">Nov 5<span>th</span>, 2011</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>Yesterdays post started with some basic list processing in pure data, the patches showed how you could serialise and interleave the lists but there were a few problems and also some missing functionality that we’re after. Specifically :-</p>

<ul>
  <li>
    <p>when we interleave lists, if one is shorter than the other then the extra elements are still appended</p>

    <ul>
      <li><strong>a b c</strong> and <strong>1 2 3 4</strong> would become <strong>a 1 b 2 c 3 4</strong></li>
    </ul>
  </li>
  <li>
    <p>we can have larger sub elements</p>

    <ul>
      <li><strong>a b c d e f</strong> with <strong>1 2 3</strong> could become <strong>a b 1 c d 2 e f 3</strong></li>
    </ul>
  </li>
</ul>

<p>Both of these problems can be easily solved by checking for the output of the list split objects right hand outlet. This will only output anything when the input list is shorter than the number of elements we want to be splitting. So for example, if we have list split 2 and we send in a single item list, that single item will be output from the right outlet. Importantly, if we’re splitting single elements off the list and we send in an empty list (same as a bang remember) then we get a bang from this output. This is a much neater way to check when all our elements have been split out. The below patches shows how this works and how we can extend it to easily deal with multi item elements in the list.</p>

<p><img src="/a/2011-11-05-patch-a-day-november-2011-day-5-list-processing-part-2/better-list-serialising.png" alt="Better list serialising" /></p>

<p>Look at the left hand section where we check the outlet, bang the done output and then send the value to the main output unless it’s a bang. Importantly here, if we were dividing the list up into 2 item elements and we had an odd number of elements, the final element would be output from this right outlet. We still want that appended onto the end of our data, but we also still need to trigger that we’re done. The easiest way to do this is to say we’re done as soon as we have output from this outlet and just to send any values that aren’t bangs onwards.</p>

<p>On the right hand side the trigger for the recursion has moved down to after the bang routing and we’re also resetting the temporary list store. This is essentially to stop us from running into some tricky timing situations. I advise playing about with this code and seeing what happens if you switch around the order in which the right outlets value gets sent to the output and the resetting of that temp list store. This section can easily deal with any size of elements and any size list input. For a very small selection of objects it’s deceptively tricky.</p>

<p>So now we have that sorted, lets get back to our more complex list interleaving.</p>

<p><img src="/a/2011-11-05-patch-a-day-november-2011-day-5-list-processing-part-2/element-interleaving.png" alt="Element interleaving" /></p>

<p>This looks much the same as the last interleaving patch, the difference here is how it checks when it’s done. The two sections that send out the list elements can now deal with arbitrary sized elements and when they’ve sent out all their elements they will just keep sending out bangs. The section at the bottom that joins the two lists is now responsible for sending the done message and it does this when the output of the list append is a bang. The thing to remember again is that a bang is like an empty list so, if one of the element splitters runs out and starts sending bangs, but the other is still sending elements, then the output of the list append will still be a list item. As soon as both have finished, the output from the append will be a bang and we trigger that we’re done. This means that if we gave it <strong>1 2 3 4 5 6 7 8 9</strong> and <strong>a b c d e f g h</strong>, specifying 2 items to an element for the first list and 3 to an element for the second, we get <strong>1 2 a b c 3 4 d e f 5 6 g h 7 8 9</strong>, exactly what we want!</p>

<p>We now have a patch that can interleave two lists and deal with differently sized elements and different length lists. This is is one of the things at which I personally feel Pure Data isn’t that great, any other language this would be a few lines of code, but here it’s become something of a major effort and there are all sorts of timing issues to contend with. It’s one of the trade offs we make for using a graphical patching language  unfortunately, but once you understand it, it’s not as daunting as it first seems.</p>

<p>It may also seem confusing at this point why I’m actually building these list manipulation patches, if you read the links in the last post it should hopefully be clear, but if not I’‘ll hopefully answer all your questions tomorrow night. Come back then for some answer.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">guy</span></span>

      








  


<time datetime="2011-11-05T17:57:06+00:00" pubdate data-updated="true">Nov 5<span>th</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/patch-a-day/'>Patch-A-Day</a>, <a class='category' href='/blog/categories/pure-data/'>Pure Data</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2011/11/04/patch-a-day-november-2011-day-4-list-processing/" title="Previous Post: Patch-a-Day November 2011 Day 4: List Processing">&laquo; Patch-a-Day November 2011 Day 4: List Processing</a>
      
      
        <a class="basic-alignment right" href="/blog/2011/11/06/patchwerk-radio-site-back-up-an-running/" title="Next Post: PatchWerk Radio site back up an running">PatchWerk Radio site back up an running &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/09/11/cuttr-is-now-live-and-running/">Cuttr is now live and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/30/programming-is-good-for-the-soul/">Programming is good for the soul</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/08/organising-domains-and-migrating-sites/">Organising Domains and migrating sites</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/30/glitchr-up-and-running/">Glitchr up and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/24/octopress-customisation/">Octopress Customisation</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/rumblesan">@rumblesan</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'rumblesan',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("rumblesan", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/rumblesan" class="twitter-follow-button" data-show-count="false">Follow @rumblesan</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - guy -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'rumblesan';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://rumblesan.com/blog/2011/11/05/patch-a-day-november-2011-day-5-list-processing-part-2/';
        var disqus_url = 'http://rumblesan.com/blog/2011/11/05/patch-a-day-november-2011-day-5-list-processing-part-2/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
