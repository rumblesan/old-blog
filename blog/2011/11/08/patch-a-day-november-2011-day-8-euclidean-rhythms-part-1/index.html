
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Patch-a-Day November 2011 Day 8: Euclidean Rhythms (part 1) - RumbleSan Heavy Noise Industries</title>
  <meta name="author" content="guy">

  
  <meta name="description" content="Right, enough list processing for the moment, lets get down to what we were aiming for. Euclidean Rhythms are rhythms generated using an algorithm &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://rumblesan.com/blog/2011/11/08/patch-a-day-november-2011-day-8-euclidean-rhythms-part-1/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="RumbleSan Heavy Noise Industries" type="application/atom+xml">
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
    });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-19842221-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">RumbleSan Heavy Noise Industries</a></h1>
  
    <h2>Noise with weight</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:rumblesan.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="http://patchwerk.rumblesan.com">PatchWerk</a></li>
  <li><a href="http://rumblesan.tumblr.com">Glitchr</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Patch-a-Day November 2011 Day 8: Euclidean Rhythms (Part 1)</h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-08T23:51:46+00:00" pubdate data-updated="true">Nov 8<span>th</span>, 2011</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>Right, enough list processing for the moment, lets get down to what we were aiming for. Euclidean Rhythms are rhythms generated using an algorithm very similar to <a href="http://en.wikipedia.org/wiki/Euclidean_algorithm">Euclid’s Algorithm</a> for computing the greatest common divisor of two numbers. What it does for us is it means we can evenly distribute a number of hits into a given number of beats and it just so happens that this actually generates some well known drum patterns from various musical styles.</p>

<p>It’s worth going and reading <a href="http://cgm.cs.mcgill.ca/~godfried/publications/banff.pdf">this paper by Godfried Toussaint</a> and this <a href="http://ruinwesen.com/blog?id=216">blog post from Ruin and Wesen</a> for more in depth discussion but I hope to explain how this works in a fairly simple manner. First up, lets have an example.</p>

<p>We want to evenly spread 3 hits into an 8 beat space, this means there will be 3 beats and 5 spaces. The sequence will be described as lists of ones for hits and zeros for spaces and we’ll start off with two separate lists. The diagram below should easily show how the lists are interleaved together until the remained reaches zero or one. This diagram uses columns to denote elements of multiple items.</p>

<p><img src="/a/2011-11-08-patch-a-day-november-2011-day-8-euclidean-rhythms-part-1/Euclidian-Rhythm-38.png" alt="Euclidian Rhythm (3,8)" /></p>

<p>At each step, you take the current remainder, interleave it with the main list and take any remainder left. You keep interleaving the two lists until the length of the remainder list is one or less, then just read out the list. So above, When we interleave the list of five zeros into the list of three ones, we have a remainder of two. This is greater than one so we interleave this into the main list again and the remainder this time is a single element.</p>

<p>This works just as well if we started with more ones than zeros as well.</p>

<p><img src="/a/2011-11-08-patch-a-day-november-2011-day-8-euclidean-rhythms-part-1/Euclidian-Rhythm-58.png" alt="Euclidian Rhythm (5,8)" /></p>

<p>After wrestling for a couple of evenings over how to do this in PD, I decided that the simplest way to do it would be to use a combination of the list length matching abstraction and the interleaving abstraction from the previous two days, and then just keep track of the element size of the main list and remainder. The work flow is pretty simple</p>

<ul>
  <li>
    <p>Start with two lists of single element items, the main list is ones and the sub list is zeros</p>
  </li>
  <li>
    <p>Get the excess elements from the longer list, this is the remainder</p>

    <ul>
      <li>The element size of the remainder is the same as whichever list it came from</li>
    </ul>
  </li>
  <li>
    <p>Interleave the main list and the sub list, element by element to get the output list</p>
  </li>
  <li>
    <p>Check the number of elements in the remainder</p>

    <ul>
      <li>
        <p>If it’s one or less then join the output list and the remainder to get your rhythm pattern</p>
      </li>
      <li>
        <p>If it’s greater than one, send the output list and the remainder back through the process</p>
      </li>
    </ul>
  </li>
</ul>

<p>The first thing that’s needed for this is a modified list length matching patch and that’s what I’ve built this evening. The previous list matcher would give you out the excess section, but would leave you to externally work out which list it came from and what the element size is. Really, this should be handled inside this patch so that we give it two lists and their element size, and we get out three lists with their element sizes.</p>

<p><img src="/a/2011-11-08-patch-a-day-november-2011-day-8-euclidean-rhythms-part-1/improved-list-splitting.png" alt="Improved list length matching" /></p>

<p>The patch here does much the same as the previous version but I’ve moved around the logic a little to try and make things more understandable. I’m using the PD value objects which I discovered the other night and I wish I’d used them sooner. The major change to the behaviour is the section in the middle/right where we compare the number of elements in each list. If the main list is greater in length than the sub list then that’s where the remainder will come from, meaning the remainder’s element size will match the main lists. If the sub list is longer then the remainder will come from here so it’s element size will match the sub list’s.</p>

<p>In this way, we now get out the three lists and their element sizes. Tomorrow night I’ll tie this into the interleaving and recursion and generate the patterns themselves.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">guy</span></span>

      








  


<time datetime="2011-11-08T23:51:46+00:00" pubdate data-updated="true">Nov 8<span>th</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/music/'>Music</a>, <a class='category' href='/blog/categories/patch-a-day/'>Patch-A-Day</a>, <a class='category' href='/blog/categories/pure-data/'>Pure Data</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2011/11/07/patch-a-day-november-2011-day-7-list-processing-part-4/" title="Previous Post: Patch-a-Day November 2011 Day 7: List Processing (part 4)">&laquo; Patch-a-Day November 2011 Day 7: List Processing (part 4)</a>
      
      
        <a class="basic-alignment right" href="/blog/2011/11/09/patch-a-day-november-2011-day-9-euclidean-rhythms-part-2/" title="Next Post: Patch-a-Day November 2011 Day 9: Euclidean Rhythms (part 2)">Patch-a-Day November 2011 Day 9: Euclidean Rhythms (part 2) &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/09/11/cuttr-is-now-live-and-running/">Cuttr is now live and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/30/programming-is-good-for-the-soul/">Programming is good for the soul</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/08/organising-domains-and-migrating-sites/">Organising Domains and migrating sites</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/30/glitchr-up-and-running/">Glitchr up and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/24/octopress-customisation/">Octopress Customisation</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/rumblesan">@rumblesan</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'rumblesan',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("rumblesan", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/rumblesan" class="twitter-follow-button" data-show-count="false">Follow @rumblesan</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - guy -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'rumblesan';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://rumblesan.com/blog/2011/11/08/patch-a-day-november-2011-day-8-euclidean-rhythms-part-1/';
        var disqus_url = 'http://rumblesan.com/blog/2011/11/08/patch-a-day-november-2011-day-8-euclidean-rhythms-part-1/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
