
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Patch-a-Day November 2011 Day 4: List Processing - RumbleSan Heavy Noise Industries</title>
  <meta name="author" content="guy">

  
  <meta name="description" content="This title may sound a bit dull but I’ve got some good intentions in mind so keep reading. Yesterday I started reading up on how Euclidean Rhythms &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://rumblesan.com/blog/2011/11/04/patch-a-day-november-2011-day-4-list-processing/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="RumbleSan Heavy Noise Industries" type="application/atom+xml">
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
    });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-19842221-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">RumbleSan Heavy Noise Industries</a></h1>
  
    <h2>Noise with weight</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:rumblesan.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="http://patchwerk.rumblesan.com">PatchWerk</a></li>
  <li><a href="http://rumblesan.tumblr.com">Glitchr</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Patch-a-Day November 2011 Day 4: List Processing</h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-04T22:47:13+00:00" pubdate data-updated="true">Nov 4<span>th</span>, 2011</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>This title may sound a bit dull but I’ve got some good intentions in mind so keep reading.</p>

<p>Yesterday I started reading up on how Euclidean Rhythms are created, I won’t go into too much detail here yet as there are a few stepping stones first but for those who want to jump straight to it there’s <a href="http://cgm.cs.mcgill.ca/~godfried/publications/banff.pdf">this paper by Godfried Toussaint</a> and then a <a href="http://ruinwesen.com/blog?id=216">blog post from Ruin and Wesen</a> which give most of the information you need. I had a look around to see if somebody had done this with Pure Data but it seemed most people had used or created externals. Whilst I’m not against using externals to do things, I wanted to try and make a Euclidean Rhythm generator in vanilla PD, because I’m a glutton for punishment pretty much.</p>

<p>A bit of research later and it’s clear that this is going to need some interesting list manipulation to get the results we’re after. Essentially the process involves interleaving the elements of a list in a fashion that’s actually a bit tricky to do with PD because of it’s non dynamic nature.</p>

<p>For this reason, this post and probably tomorrows will be all about list processing in PD. I’ve actually been learning quite a few things that in retrospect I’d consider to be the basics so I think it bears pointing them out as well for those that might not be so comfortable with PD’s lists.</p>

<p>A couple quick things,</p>

<ul>
  <li>
    <p>a list is a collection of data elements that has a <strong>list</strong> element at the front</p>

    <ul>
      <li>
        <p><strong>list 1 2 c d 5</strong></p>
      </li>
      <li>
        <p><strong>list a b c</strong></p>
      </li>
      <li>
        <p><strong>list 1.1 4 c</strong></p>
      </li>
    </ul>
  </li>
  <li>
    <p>if a list starts with a float or int then it doesn’t have to have “list” at the front</p>

    <ul>
      <li>
        <p><strong>1.1 2.2 3.3</strong> is the same as <strong>list 1.1 2.2 3.3</strong></p>
      </li>
      <li>
        <p><strong>a b c</strong> is not the same as <strong>list a b c</strong></p>
      </li>
      <li>
        <p>**a b c **is undefined. some objects will treat it as a list, some won’t</p>
      </li>
    </ul>
  </li>
  <li>
    <p>a bang is the same as an empty list</p>
  </li>
</ul>

<p>With these things in mind, lets have a look at the first patch that just simply takes a single list and serialises it into separate elements.</p>

<p><img src="/a/2011-11-04-patch-a-day-november-2011-day-4-list-processing/list-serialise.png" alt="List serialiser" /></p>

<p>The output from this would look like :-</p>

<blockquote>

  <pre><code>main: 1
main: 2
main: 3
main: 4
</code></pre>

</blockquote>

<p>Nothing spectacular but what we’re doing here is pretty important for the rest of this. The list split object here is used to pull off the first element of the list we feed in. This value comes out the left hand outlet, the rest of the list comes out the middle outlet and is stored in the second list object. When the first element is printed out it sends the rest of the list back into the split and in this manner we recursively pull the next element off the list, eventually printing them all out one by one.</p>

<p>Scaling this idea up a little it can be used to interleave two lists together. By that I mean that we can join two lists so that they are merged into one another, with the single elements from each list following the other. Probably best to explain with an example, if we have <strong>1 2 3 4 5</strong> and <strong>a b c d e</strong> then after the process we would have <strong>1 a 2 b 3 c 4 d 5 e</strong>. That’s exactly what the next patch does.</p>

<p><img src="/a/2011-11-04-patch-a-day-november-2011-day-4-list-processing/list-interlever1.png" alt="List interleaver patch" /></p>

<p>This patch talks about main list and sub list. To follow on from the above example, main list is <strong>1 2 3 4 5</strong> and sub list is <strong>a b c d e</strong>. The top left is just a bit of logic to make sure the sub list is in place before the main list starts the process running. The two groups of objects in the top centre are the list split feedback loops that serialise a list. These are setup so that a bang message can be sent to the get-next receive objects to get the next element. Also there’s a route bang and a send $0-done. When there are no more elements in the main list we assume that everything is finished and the lists are interleaved.</p>

<p>The section in the middle at the bottom joins the main and sub list items into one list, sends that to the final joining section, and then sends the bangs to get the next two items. The section on the right gets the join item pairs, recursively joins them to make one list and then when it recieves the done signal it outputs it.</p>

<p>There are a couple of problems with this patch thought, that I’ll fix tomorrow night but explain now in case someone wants to try and solve them themselves.</p>

<ul>
  <li>
    <p>if the main list is shorter than the sub list then elements get missed off</p>
  </li>
  <li>
    <p>if the sub list is shorter than the main list then the last sub list element is repeated</p>
  </li>
  <li>
    <p>we can only join single elements, not pairs or other numbers</p>
  </li>
</ul>

<p>I still haven’t quite worked out if I will be able to generate Euclidean Rhythms with these objects so if it turns out I can’t then these will just be a series of articles on list processing in Pure Data (still useful in places, but maybe not so much fun). I’m hoping though that I can get it all sorted and start making some excellent generative drums. Time will tell I suppose.</p>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">guy</span></span>

      








  


<time datetime="2011-11-04T22:47:13+00:00" pubdate data-updated="true">Nov 4<span>th</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/patch-a-day/'>Patch-A-Day</a>, <a class='category' href='/blog/categories/pure-data/'>Pure Data</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2011/11/03/patch-a-day-november-2011-day-3-passthrough-design-pattern-part-3/" title="Previous Post: Patch-a-Day November 2011 Day 3: Passthrough Design Pattern (part 3)">&laquo; Patch-a-Day November 2011 Day 3: Passthrough Design Pattern (part 3)</a>
      
      
        <a class="basic-alignment right" href="/blog/2011/11/05/patch-a-day-november-2011-day-5-list-processing-part-2/" title="Next Post: Patch-a-Day November 2011 Day 5: List Processing (part 2)">Patch-a-Day November 2011 Day 5: List Processing (part 2) &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/09/11/cuttr-is-now-live-and-running/">Cuttr is now live and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/30/programming-is-good-for-the-soul/">Programming is good for the soul</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/08/organising-domains-and-migrating-sites/">Organising Domains and migrating sites</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/30/glitchr-up-and-running/">Glitchr up and running</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/24/octopress-customisation/">Octopress Customisation</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/rumblesan">@rumblesan</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'rumblesan',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("rumblesan", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/rumblesan" class="twitter-follow-button" data-show-count="false">Follow @rumblesan</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - guy -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'rumblesan';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://rumblesan.com/blog/2011/11/04/patch-a-day-november-2011-day-4-list-processing/';
        var disqus_url = 'http://rumblesan.com/blog/2011/11/04/patch-a-day-november-2011-day-4-list-processing/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
